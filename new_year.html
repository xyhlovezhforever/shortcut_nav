<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ† 2026 æ–°å¹´å¿«ä¹!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: linear-gradient(to bottom, #0a0e27 0%, #1a1a3e 50%, #2a1a4e 100%);
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100vh;
        }

        .hidden {
            display: none;
        }

        #text-canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
        }

        #start-prompt {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(36px, 8vw, 72px);
            font-weight: 900;
            z-index: 10;
            cursor: pointer;
            animation: pulse 2s infinite, rainbow 3s linear infinite;
            color: transparent;
            -webkit-text-stroke: 4px #fff;
            text-stroke: 4px #fff;
            filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9))
                    drop-shadow(0 0 50px rgba(255, 100, 200, 0.7))
                    drop-shadow(0 0 70px rgba(100, 200, 255, 0.5));
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            letter-spacing: 4px;
        }

        #info {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(14px, 3vw, 20px);
            font-weight: 700;
            text-align: center;
            z-index: 10;
            transition: opacity 0.5s ease;
            color: transparent;
            -webkit-text-stroke: 1.5px rgba(255, 255, 255, 0.7);
            text-stroke: 1.5px rgba(255, 255, 255, 0.7);
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        #fullscreen-hint {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(12px, 2.5vw, 16px);
            font-weight: 600;
            text-align: center;
            z-index: 10;
            color: rgba(255, 255, 255, 0.5);
            animation: blink 2s infinite;
        }

        #blessing-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(40px, 12vw, 100px);
            font-weight: 900;
            z-index: 10;
            color: transparent;
            -webkit-text-stroke: 4px #ffd700;
            text-stroke: 4px #ffd700;
            filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9))
                    drop-shadow(0 0 50px rgba(255, 215, 0, 0.6));
            opacity: 0;
            transition: opacity 0.5s ease;
            white-space: nowrap;
        }

        #year-text {
            position: absolute;
            top: 32%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(60px, 18vw, 160px);
            font-weight: 900;
            z-index: 10;
            color: transparent;
            -webkit-text-stroke: 5px #ffaa00;
            text-stroke: 5px #ffaa00;
            filter: drop-shadow(0 0 40px rgba(255, 170, 0, 0.9))
                    drop-shadow(0 0 60px rgba(255, 170, 0, 0.6));
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #blessing-text {
            position: absolute;
            top: 68%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(20px, 6vw, 50px);
            font-weight: 900;
            z-index: 10;
            color: transparent;
            -webkit-text-stroke: 3px #ff69b4;
            text-stroke: 3px #ff69b4;
            filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.9))
                    drop-shadow(0 0 40px rgba(255, 105, 180, 0.6));
            opacity: 0;
            transition: opacity 0.5s ease;
            white-space: nowrap;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.15);
            }
        }

        @keyframes rainbow {
            0% {
                filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9))
                        drop-shadow(0 0 50px rgba(255, 100, 200, 0.7))
                        drop-shadow(0 0 70px rgba(100, 200, 255, 0.5));
            }
            33% {
                filter: drop-shadow(0 0 30px rgba(255, 100, 200, 0.9))
                        drop-shadow(0 0 50px rgba(100, 200, 255, 0.7))
                        drop-shadow(0 0 70px rgba(255, 215, 0, 0.5));
            }
            66% {
                filter: drop-shadow(0 0 30px rgba(100, 200, 255, 0.9))
                        drop-shadow(0 0 50px rgba(255, 215, 0, 0.7))
                        drop-shadow(0 0 70px rgba(255, 100, 200, 0.5));
            }
            100% {
                filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9))
                        drop-shadow(0 0 50px rgba(255, 100, 200, 0.7))
                        drop-shadow(0 0 70px rgba(100, 200, 255, 0.5));
            }
        }

        .pulse {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <canvas id="text-canvas"></canvas>
    <div id="start-prompt">ç‚¹æˆ‘è·¨å¹´å•¦</div>
    <div id="fullscreen-hint">ğŸ“º å·²è‡ªåŠ¨è¿›å…¥å…¨å±æ¨¡å¼</div>
    <div id="info">å‡†å¤‡è¿æ¥æ–°å¹´çš„åˆ°æ¥ âœ¨</div>

    <div id="blessing-message" class="hidden">ğŸ‰ å‘¨å°è· ğŸ‰</div>
    <div id="year-text" class="hidden">2026</div>
    <div id="blessing-text" class="hidden">ä¸‡äº‹å¦‚æ„ Â· å¿ƒæƒ³äº‹æˆ</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const textCanvas = document.getElementById('text-canvas');
        const textCtx = textCanvas.getContext('2d');
        const startPromptEl = document.getElementById('start-prompt');
        const fullscreenHintEl = document.getElementById('fullscreen-hint');
        const infoEl = document.getElementById('info');
        const blessingMessageEl = document.getElementById('blessing-message');
        const yearTextEl = document.getElementById('year-text');
        const blessingTextEl = document.getElementById('blessing-text');

        let countdownStarted = false;
        let currentCount = 10;

        // è®¾ç½®Canvaså¤§å°
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        textCanvas.width = window.innerWidth;
        textCanvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            textCanvas.width = window.innerWidth;
            textCanvas.height = window.innerHeight;
        });

        // æ–‡å­—ç²’å­ç±»
        class TextParticle {
            constructor(x, y, color, isPermanent = false) {
                this.baseX = x;
                this.baseY = y;
                this.x = x + (Math.random() - 0.5) * 200;
                this.y = y + (Math.random() - 0.5) * 200;
                this.targetX = x;
                this.targetY = y;
                this.color = color;
                this.size = isPermanent ? Math.random() * 1.5 + 1 : Math.random() * 2.5 + 2;
                this.speedX = 0;
                this.speedY = 0;
                this.alpha = 0;
                this.isPermanent = isPermanent;

                // ç‚«é…·æ•ˆæœå‚æ•°
                this.hue = this.getHueFromColor(color);
                this.time = Math.random() * Math.PI * 2;
                this.settled = false;
            }

            getHueFromColor(color) {
                // æ ¹æ®é¢œè‰²è¿”å›è‰²ç›¸å€¼
                const colorMap = {
                    '#ffd700': 50,  // é‡‘è‰²
                    '#ff69b4': 330, // ç²‰è‰²
                    '#ffffff': 0,   // ç™½è‰²
                };
                return colorMap[color] || 0;
            }

            update() {
                // ç§»å‘ç›®æ ‡ä½ç½®
                const dx = this.targetX - this.x;
                const dy = this.targetY - this.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance > 2) {
                    this.speedX = dx * 0.12;
                    this.speedY = dy * 0.12;
                    this.x += this.speedX;
                    this.y += this.speedY;
                } else {
                    this.settled = true;
                    // æ°¸ä¹…æ–‡å­—æ·»åŠ å¾®å°æ¼‚æµ®æ•ˆæœ
                    if (this.isPermanent) {
                        this.time += 0.02;
                        this.x = this.targetX + Math.sin(this.time) * 0.5;
                        this.y = this.targetY + Math.cos(this.time * 0.7) * 0.5;
                    }
                }

                // æ¸ç°
                if (this.alpha < 1) {
                    this.alpha += 0.03;
                }
            }

            draw() {
                textCtx.save();

                // å¤šå±‚å‘å…‰æ•ˆæœ - å‡å¼±å…‰æ™•å¼ºåº¦
                if (this.isPermanent && this.settled) {
                    // å¤–å±‚å¤§å…‰æ™• - å‘¼å¸æ•ˆæœ
                    const breathe = Math.sin(this.time * 2) * 0.2 + 0.5;
                    textCtx.globalAlpha = this.alpha * 0.08 * breathe;
                    textCtx.fillStyle = this.color;
                    textCtx.beginPath();
                    textCtx.arc(this.x, this.y, this.size * 4, 0, Math.PI * 2);
                    textCtx.fill();

                    // ä¸­å±‚å…‰æ™•
                    textCtx.globalAlpha = this.alpha * 0.2;
                    textCtx.beginPath();
                    textCtx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                    textCtx.fill();
                }

                // ä¸»ä½“ç²’å­
                textCtx.globalAlpha = this.alpha;
                textCtx.fillStyle = this.color;
                textCtx.beginPath();
                textCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                textCtx.fill();

                // å†…éƒ¨é«˜å…‰
                if (this.isPermanent && this.settled) {
                    textCtx.globalAlpha = this.alpha * 0.8;
                    textCtx.fillStyle = '#ffffff';
                    textCtx.beginPath();
                    textCtx.arc(this.x - this.size * 0.3, this.y - this.size * 0.3, this.size * 0.4, 0, Math.PI * 2);
                    textCtx.fill();
                }

                textCtx.restore();
            }
        }

        // æ–‡å­—ç²’å­ç³»ç»Ÿ
        const textParticles = [];
        let currentTextParticles = [];

        function createTextParticles(text, fontSize, y, color, isPermanent = false) {
            const particles = [];
            textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);
            textCtx.font = `900 ${fontSize}px Arial`;
            textCtx.fillStyle = 'white';
            textCtx.textAlign = 'center';
            textCtx.textBaseline = 'middle';

            // ä¸´æ—¶ç»˜åˆ¶æ–‡å­—
            textCtx.fillText(text, textCanvas.width / 2, y);

            // è·å–åƒç´ æ•°æ®
            const imageData = textCtx.getImageData(0, 0, textCanvas.width, textCanvas.height);
            const pixels = imageData.data;

            // é‡‡æ ·é—´éš” - æ°¸ä¹…æ–‡å­—é€‚ä¸­å¯†åº¦
            const gap = isPermanent ? 5 : 4;

            for (let y = 0; y < textCanvas.height; y += gap) {
                for (let x = 0; x < textCanvas.width; x += gap) {
                    const index = (y * textCanvas.width + x) * 4;
                    const alpha = pixels[index + 3];

                    if (alpha > 128) {
                        particles.push(new TextParticle(x, y, color, isPermanent));
                    }
                }
            }

            textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);
            return particles;
        }

        function clearTextParticles() {
            currentTextParticles = [];
        }

        function showTextParticles(text, fontSize, y, color, isPermanent = false) {
            if (!isPermanent) {
                clearTextParticles();
            }
            const newParticles = createTextParticles(text, fontSize, y, color, isPermanent);
            if (isPermanent) {
                currentTextParticles.push(...newParticles);
            } else {
                currentTextParticles = newParticles;
            }
        }

        function updateAndDrawTextParticles() {
            textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);
            for (const particle of currentTextParticles) {
                particle.update();
                particle.draw();
            }
        }

        // çƒŸèŠ±ç²’å­ç±» - çº¿æ€§ç²’å­æ•ˆæœ
        class Particle {
            constructor(x, y, color, isBig = false) {
                this.x = x;
                this.y = y;
                this.startX = x;
                this.startY = y;
                this.color = color;

                if (isBig) {
                    // å¤§çƒŸèŠ±ç²’å­ - çº¿æ€§è¿åŠ¨
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 8 + 6; // çº¿æ€§é€Ÿåº¦
                    this.velocity = {
                        x: Math.cos(angle) * speed,
                        y: Math.sin(angle) * speed
                    };
                    this.radius = Math.random() * 2 + 1.5;
                    this.decay = Math.random() * 0.008 + 0.006;
                    this.gravity = 0.05; // å¾ˆè½»å¾®çš„é‡åŠ›
                } else {
                    this.velocity = {
                        x: (Math.random() - 0.5) * 8,
                        y: (Math.random() - 0.5) * 8
                    };
                    this.radius = Math.random() * 2 + 1;
                    this.decay = Math.random() * 0.02 + 0.015;
                    this.gravity = 0.1;
                }

                this.alpha = 1;
                this.trail = []; // æ‹–å°¾æ•ˆæœ
            }

            update() {
                // è®°å½•è½¨è¿¹
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 3) {
                    this.trail.shift();
                }

                // çº¿æ€§è¿åŠ¨ï¼Œè½»å¾®é‡åŠ›
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;
            }

            draw() {
                ctx.save();

                // ç»˜åˆ¶æ‹–å°¾
                for (let i = 0; i < this.trail.length; i++) {
                    const point = this.trail[i];
                    const trailAlpha = (i / this.trail.length) * this.alpha * 0.5;
                    ctx.globalAlpha = trailAlpha;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.radius * 0.6, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }

                // ç»˜åˆ¶ç²’å­æœ¬ä½“ - ç®€å•çš„åœ†å½¢
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();

                ctx.restore();
            }
        }

        // çƒŸèŠ±ç±»
        class Firework {
            constructor(startX, startY, targetX, targetY) {
                this.x = startX;
                this.y = startY;
                this.targetX = targetX;
                this.targetY = targetY;
                this.particles = [];
                this.exploded = false;

                const dx = targetX - startX;
                const dy = targetY - startY;
                const distance = Math.sqrt(dx * dx + dy * dy);

                this.velocity = {
                    x: dx / distance * 5,
                    y: dy / distance * 5
                };

                this.trail = [];
                this.trailLength = 10;
            }

            update() {
                if (!this.exploded) {
                    this.trail.push({ x: this.x, y: this.y });
                    if (this.trail.length > this.trailLength) {
                        this.trail.shift();
                    }

                    this.x += this.velocity.x;
                    this.y += this.velocity.y;

                    const dx = this.targetX - this.x;
                    const dy = this.targetY - this.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 10) {
                        this.explode();
                    }
                }

                for (let i = this.particles.length - 1; i >= 0; i--) {
                    this.particles[i].update();
                    if (this.particles[i].alpha <= 0) {
                        this.particles.splice(i, 1);
                    }
                }
            }

            draw() {
                if (!this.exploded) {
                    // ç»˜åˆ¶æ‹–å°¾
                    for (let i = 0; i < this.trail.length; i++) {
                        const point = this.trail[i];
                        const alpha = i / this.trail.length;
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, 2, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                        ctx.fill();
                    }

                    // ç»˜åˆ¶ç«ç®­
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'white';
                    ctx.fill();
                }

                for (const particle of this.particles) {
                    particle.draw();
                }
            }

            explode() {
                this.exploded = true;
                const colors = [
                    '#ff0000', '#ff7f00', '#ffff00', '#00ff00',
                    '#0000ff', '#4b0082', '#9400d3', '#ff1493',
                    '#00ffff', '#ff69b4', '#ffd700', '#ffffff'
                ];

                const particleCount = Math.random() * 150 + 200; // å¢åŠ ç²’å­æ•°é‡
                const color = colors[Math.floor(Math.random() * colors.length)];

                for (let i = 0; i < particleCount; i++) {
                    this.particles.push(new Particle(this.x, this.y, color));
                }
            }

            isDead() {
                return this.exploded && this.particles.length === 0;
            }
        }

        const fireworks = [];
        let autoLaunch = false;

        // è‡ªåŠ¨å‘å°„çƒŸèŠ±
        function launchFirework(targetX, targetY) {
            const startX = Math.random() * canvas.width;
            const startY = canvas.height;
            const tx = targetX || Math.random() * canvas.width;
            const ty = targetY || Math.random() * canvas.height * 0.5;

            fireworks.push(new Firework(startX, startY, tx, ty));
        }

        // åˆ›å»ºä¸€ä¸ªå¤§çƒŸèŠ±ç²’å­çˆ†ç‚¸æ•ˆæœ - çº¿æ€§ç²’å­ï¼Œé€‚åº¦å¯†é›†
        class BigFirework {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.particles = [];
                this.createBigExplosion();
            }

            createBigExplosion() {
                const colors = [
                    '#ff0000', '#ff7f00', '#ffff00', '#00ff00',
                    '#0000ff', '#4b0082', '#9400d3', '#ff1493',
                    '#00ffff', '#ff69b4', '#ffd700', '#ffffff'
                ];

                // éšæœºé€‰æ‹©2-3ç§é¢œè‰²
                const selectedColors = [];
                const colorCount = Math.floor(Math.random() * 2) + 2;
                for (let i = 0; i < colorCount; i++) {
                    selectedColors.push(colors[Math.floor(Math.random() * colors.length)]);
                }

                // åˆ›å»ºé€‚é‡çº¿æ€§ç²’å­ - å‡åŒ€åˆ†å¸ƒåœ¨åœ†å‘¨ä¸Š
                const particleCount = 250; // å‡å°‘åˆ°250ä¸ªç²’å­ï¼Œæ›´ç¨€ç–
                for (let i = 0; i < particleCount; i++) {
                    const color = selectedColors[Math.floor(Math.random() * selectedColors.length)];
                    this.particles.push(new Particle(this.x, this.y, color, true));
                }
            }

            update() {
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    this.particles[i].update();
                    if (this.particles[i].alpha <= 0) {
                        this.particles.splice(i, 1);
                    }
                }
            }

            draw() {
                for (const particle of this.particles) {
                    particle.draw();
                }
            }

            isDead() {
                return this.particles.length === 0;
            }
        }

        const bigFireworks = [];

        // å€’è®¡æ—¶ä¸­æ¯ä¸ªæ•°å­—çˆ†ç‚¸ä¸€ä¸ªå¤§çƒŸèŠ±
        function launchCountdownFireworks() {
            const centerX = canvas.width * 0.5;
            const centerY = canvas.height * 0.5;

            // ç›´æ¥åœ¨å±å¹•ä¸­å¿ƒåˆ›å»ºä¸€ä¸ªå¤§çƒŸèŠ±çˆ†ç‚¸
            bigFireworks.push(new BigFirework(centerX, centerY));
        }

        // æœ€ç»ˆå¤§çˆ†ç‚¸
        function finalExplosion() {
            // å…¨å±ç–¯ç‹‚çˆ†ç‚¸çƒŸèŠ±
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height * 0.7;
                    launchFirework(x, y);
                }, i * 80);
            }

            // æŒç»­çˆ†ç‚¸3ç§’
            const explosionInterval = setInterval(() => {
                for (let i = 0; i < 3; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height * 0.7;
                    launchFirework(x, y);
                }
            }, 200);

            setTimeout(() => {
                clearInterval(explosionInterval);
            }, 5000);
        }

        // è¿›å…¥å…¨å±æ¨¡å¼
        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) { // Safari
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { // IE11
                elem.msRequestFullscreen();
            } else if (elem.mozRequestFullScreen) { // Firefox
                elem.mozRequestFullScreen();
            }
        }

        // ç‚¹å‡»å¼€å§‹å€’è®¡æ—¶
        function startCountdown() {
            if (countdownStarted) return;
            countdownStarted = true;

            // è¿›å…¥å…¨å±
            enterFullscreen();

            // ç«‹å³éšè—å¼€å§‹æç¤º
            startPromptEl.classList.add('hidden');
            fullscreenHintEl.classList.add('hidden');
            infoEl.classList.add('hidden');

            // è®¡ç®—å“åº”å¼å­—ä½“å¤§å°
            const countdownFontSize = Math.min(280, window.innerWidth * 0.4);

            // ç«‹å³æ˜¾ç¤ºç¬¬ä¸€ä¸ªå€’è®¡æ—¶æ•°å­—
            showTextParticles(String(currentCount), countdownFontSize, canvas.height / 2, '#ffffff');
            launchCountdownFireworks();
            currentCount--;

            // å¼€å§‹å€’è®¡æ—¶
            const countdownInterval = setInterval(() => {
                if (currentCount >= 0) {
                    // æ˜¾ç¤ºç²’å­æ•°å­—
                    showTextParticles(String(currentCount), countdownFontSize, canvas.height / 2, '#ffffff');

                    // æ¯ä¸ªæ•°å­—çˆ†ç‚¸çƒŸèŠ±
                    if (currentCount > 0) {
                        launchCountdownFireworks();
                    } else {
                        // åˆ°0æ—¶åœ¨æ•°å­—å‘¨å›´ä¸æ–­ç¯ç»•çˆ†ç‚¸çƒŸèŠ±
                        const centerX = canvas.width * 0.5;
                        const centerY = canvas.height * 0.5;
                        const radius = 400; // è·ç¦»æ•°å­—ä¸­å¿ƒçš„åŠå¾„

                        // æŒç»­3ç§’ï¼Œåœ¨æ•°å­—å‘¨å›´åœ†å½¢ç¯ç»•çˆ†ç‚¸
                        const surroundInterval = setInterval(() => {
                            // åœ¨åœ†å‘¨ä¸Šéšæœº4-6ä¸ªä½ç½®çˆ†ç‚¸
                            const count = Math.floor(Math.random() * 3) + 4;
                            for (let i = 0; i < count; i++) {
                                const angle = (Math.PI * 2 / count) * i + Math.random() * 0.5;
                                const r = radius + (Math.random() - 0.5) * 100;
                                const x = centerX + Math.cos(angle) * r;
                                const y = centerY + Math.sin(angle) * r;

                                setTimeout(() => {
                                    bigFireworks.push(new BigFirework(x, y));
                                }, i * 80);
                            }
                        }, 600); // æ¯0.6ç§’ä¸€æ³¢

                        // 3ç§’ååœæ­¢ç¯ç»•çˆ†ç‚¸å¹¶æ˜¾ç¤ºç¥ç¦è¯­
                        setTimeout(() => {
                            clearInterval(surroundInterval);
                            clearTextParticles();

                            // æ˜¾ç¤ºæ™®é€šHTMLç¥ç¦è¯­
                            setTimeout(() => {
                                blessingMessageEl.classList.remove('hidden');
                                blessingMessageEl.style.opacity = '1';
                            }, 100);

                            setTimeout(() => {
                                yearTextEl.classList.remove('hidden');
                                yearTextEl.style.opacity = '1';
                            }, 500);

                            setTimeout(() => {
                                blessingTextEl.classList.remove('hidden');
                                blessingTextEl.style.opacity = '1';
                            }, 1000);

                            // ç¥ç¦è¯­æ˜¾ç¤ºåï¼ŒçƒŸèŠ±æŒç»­åœ¨å‘¨å›´ç¯ç»•ï¼ˆæ°¸ä¹…ï¼‰- å‡å°‘å¯†åº¦
                            const blessingInterval = setInterval(() => {
                                // åœ¨åœ†å‘¨ä¸Šéšæœº2-3ä¸ªä½ç½®çˆ†ç‚¸ï¼Œå‡å°‘æ•°é‡
                                const count = Math.floor(Math.random() * 2) + 2;
                                for (let i = 0; i < count; i++) {
                                    const angle = (Math.PI * 2 / count) * i + Math.random() * 1.0;
                                    const r = radius + (Math.random() - 0.5) * 200;
                                    const x = centerX + Math.cos(angle) * r;
                                    const y = centerY + Math.sin(angle) * r;

                                    setTimeout(() => {
                                        bigFireworks.push(new BigFirework(x, y));
                                    }, i * 150);
                                }
                            }, 1200); // æ¯1.2ç§’ä¸€æ³¢ï¼Œé—´éš”æ›´é•¿
                        }, 3000);
                    }

                    currentCount--;
                } else {
                    clearInterval(countdownInterval);
                }
            }, 1000);
        }

        // ç‚¹å‡»äº‹ä»¶
        canvas.addEventListener('click', startCountdown);
        startPromptEl.addEventListener('click', startCountdown);

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            ctx.fillStyle = 'rgba(10, 14, 39, 0.2)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // æ¸²æŸ“æ™®é€šçƒŸèŠ±
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                fireworks[i].draw();

                if (fireworks[i].isDead()) {
                    fireworks.splice(i, 1);
                }
            }

            // æ¸²æŸ“å¤§çƒŸèŠ±
            for (let i = bigFireworks.length - 1; i >= 0; i--) {
                bigFireworks[i].update();
                bigFireworks[i].draw();

                if (bigFireworks[i].isDead()) {
                    bigFireworks.splice(i, 1);
                }
            }

            // æ¸²æŸ“ç²’å­æ–‡å­—
            updateAndDrawTextParticles();

            requestAnimationFrame(animate);
        }

        // é¡µé¢åŠ è½½æ—¶å°è¯•è¿›å…¥å…¨å±
        window.addEventListener('load', () => {
            // å»¶è¿Ÿä¸€ç‚¹ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
            setTimeout(() => {
                enterFullscreen();
            }, 100);
        });

        // ç”¨æˆ·é¦–æ¬¡ç‚¹å‡»é¡µé¢æ—¶ä¹Ÿå°è¯•è¿›å…¥å…¨å±ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
        let firstInteraction = true;
        document.addEventListener('click', () => {
            if (firstInteraction && !document.fullscreenElement) {
                enterFullscreen();
                firstInteraction = false;
            }
        }, { once: false });

        // å¯åŠ¨
        animate();
    </script>
</body>
</html>
