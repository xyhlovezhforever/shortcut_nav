# Task Orchestration Service - 项目迁移文档索引

> **文档版本**: v1.4
> **创建日期**: 2026-01-05
> **最后更新**: 2026-01-14
> **适用场景**: 在新环境中重建/迁移本项目

---

## 文档概览

本目录包含完整的项目逻辑迁移文档，帮助开发者在新环境中重建任务编排服务项目。文档按照迁移优先级和依赖关系进行组织。

**✨ v1.4 更新要点** (2026-01-14):
- ✅ 更新核心架构文档（02 v1.1），反映智能轮数管理和新增模块
- ✅ 更新LLM交互文档（05 v1.1），提示词模块从7个扩展至12个
- ✅ 新增6个高级功能提示词模块详细说明
- ✅ 完善文档间交叉引用和导航

---

## 文档列表

### 基础文档

| 序号 | 文档名称 | 描述 | 优先级 | 版本 |
|------|---------|------|--------|------|
| 01 | [项目概述与技术栈](./01-项目概述与技术栈.md) | 项目定位、核心功能、技术选型 | ⭐⭐⭐⭐⭐ | v1.0 |
| 02 | [核心架构设计](./02-核心架构设计.md) | Reflective Planning架构、🆕 智能轮数管理、🆕 新增模块 | ⭐⭐⭐⭐⭐ | v1.1 |
| 03 | [核心模块实现详解](./03-核心模块实现详解.md) | 各核心模块的详细实现逻辑 | ⭐⭐⭐⭐⭐ | v1.0 |

### 核心机制文档

| 序号 | 文档名称 | 描述 | 优先级 | 版本 |
|------|---------|------|--------|------|
| 04 | [数据流转与参数解析机制](./04-数据流转与参数解析机制.md) | 三层数据存储、占位符解析、数据同步 | ⭐⭐⭐⭐⭐ | v1.0 |
| 05 | [LLM交互与提示词系统](./05-LLM交互与提示词系统.md) | 🆕 12个提示词模块、场景路由、语义匹配 | ⭐⭐⭐⭐ | v1.1 |
| 06 | [反思与重规划机制](./06-反思与重规划机制.md) | 失败处理、分层恢复策略、🆕 智能轮数管理 | ⭐⭐⭐⭐ | v1.1 |
| 07 | [并行执行机制](./07-并行执行机制.md) | DAG分析、拓扑排序、并发调度 | ⭐⭐⭐ | v1.0 |

### 接口与配置文档

| 序号 | 文档名称 | 描述 | 优先级 |
|------|---------|------|--------|
| 08 | [API与服务接口](./08-API与服务接口.md) | REST API、gRPC接口、Proto定义 | ⭐⭐⭐⭐ |
| 09 | [配置与部署指南](./09-配置与部署指南.md) | 配置文件、环境变量、部署步骤 | ⭐⭐⭐⭐ |

### 补充文档

| 序号 | 文档名称 | 描述 | 优先级 | 版本 |
|------|---------|------|--------|------|
| 11 | [AI报告生成器与消息格式化](./11-AI报告生成器与消息格式化.md) | 两层提示词架构、响应模式、AI润色 | ⭐⭐⭐ | v1.0 |
| 12 | [任务缓存与命中机制](./12-任务缓存与命中机制.md) | TaskExperience、缓存命中、计划复用 | ⭐⭐⭐ | v1.0 |
| 13 | [上下文工程事件详解](./13-上下文工程事件详解.md) | 执行记录、自我验证、结构化输出 | ⭐⭐⭐ | v1.0 |
| 14 | [Workflow工作流管理](./14-Workflow工作流管理.md) | 标准流程定义、关键词匹配、LLM引导 | ⭐⭐⭐ | v1.0 |
| 15 | [服务发现与注册](./15-服务发现与注册.md) | Consul集成、负载均衡、健康检查 | ⭐⭐⭐ | v1.0 |
| 16 | [Kafka事件系统](./16-Kafka事件系统.md) | 事件生产消费、审计日志、Topic设计 | ⭐⭐⭐ | v1.0 |

### 高级特性文档 (v1.3 新增)

| 序号 | 文档名称 | 描述 | 优先级 | 版本 |
|------|---------|------|--------|------|
| 17 | [Plan-with-Files模式](./17-Plan-with-Files模式.md) | 执行历史作为单一真理来源、统计摘要、结构化历史 | ⭐⭐⭐⭐ | v1.0 |
| 18 | [移除轮数限制机制](./18-移除轮数限制机制.md) | 由大模型决定反思与重规划、软性引导、智能决策 | ⭐⭐⭐⭐ | v1.0 |
| 19 | [动态参数推断功能](./19-动态参数推断功能.md) | LLM运行时参数生成、上下文感知、可选增强功能 | ⭐⭐⭐ | v1.0 |

### 实施文档

| 序号 | 文档名称 | 描述 | 优先级 |
|------|---------|------|--------|
| 10 | [迁移检查清单](./10-迁移检查清单.md) | 迁移步骤检查、验证清单、常见问题 | ⭐⭐⭐⭐⭐ |

---

## 迁移建议顺序

```
1. 阅读项目概述，理解项目定位和技术栈
   └─> 01-项目概述与技术栈.md

2. 理解核心架构设计
   └─> 02-核心架构设计.md

3. 搭建项目骨架
   ├─> 创建 Cargo.toml
   ├─> 创建目录结构
   └─> 配置 Proto 文件

4. 实现核心模块（按依赖顺序）
   ├─> 03-核心模块实现详解.md
   ├─> config/ (配置模块)
   ├─> utils/ (工具模块)
   ├─> core/execution_context.rs
   ├─> core/parameter_resolver.rs
   ├─> core/executor.rs
   ├─> core/planner.rs
   ├─> core/evaluator.rs
   ├─> core/reflector.rs
   └─> core/orchestrator.rs

5. 实现数据流转机制
   └─> 04-数据流转与参数解析机制.md

6. 实现LLM交互模块
   └─> 05-LLM交互与提示词系统.md

7. 实现反思与重规划
   └─> 06-反思与重规划机制.md

8. 实现并行执行（可选）
   └─> 07-并行执行机制.md

9. 实现API接口
   └─> 08-API与服务接口.md

10. 配置与部署
    └─> 09-配置与部署指南.md

11. 实现增强功能（可选）
    ├─> 11-AI报告生成器与消息格式化.md
    ├─> 12-任务缓存与命中机制.md
    ├─> 13-上下文工程事件详解.md
    └─> 14-Workflow工作流管理.md

12. 实现微服务集成（可选）
    ├─> 15-服务发现与注册.md
    └─> 16-Kafka事件系统.md

13. 验证迁移结果
    └─> 10-迁移检查清单.md
```

---

## 快速导航

### 按功能查找

**核心流程相关**:
- Reflective Planning循环如何实现？ → 02-核心架构设计.md
- 任务规划器如何工作？ → 03-核心模块实现详解.md
- 步骤执行器如何实现？ → 03-核心模块实现详解.md

**数据相关**:
- 步骤间如何传递数据？ → 04-数据流转与参数解析机制.md
- 占位符如何解析？ → 04-数据流转与参数解析机制.md
- metadata如何管理？ → 04-数据流转与参数解析机制.md

**LLM相关**:
- 提示词如何设计？ → 05-LLM交互与提示词系统.md
- 场景路由如何实现？ → 05-LLM交互与提示词系统.md
- 两阶段规划如何工作？ → 05-LLM交互与提示词系统.md

**容错相关**:
- 失败如何处理？ → 06-反思与重规划机制.md
- 如何重新规划？ → 06-反思与重规划机制.md
- 重试策略如何配置？ → 06-反思与重规划机制.md

**性能相关**:
- 如何实现并行执行？ → 07-并行执行机制.md
- DAG分析如何工作？ → 07-并行执行机制.md

**接口相关**:
- REST API有哪些？ → 08-API与服务接口.md
- gRPC如何定义？ → 08-API与服务接口.md
- 如何集成工具服务？ → 08-API与服务接口.md

**部署相关**:
- 配置文件怎么写？ → 09-配置与部署指南.md
- 环境变量有哪些？ → 09-配置与部署指南.md
- 如何启动服务？ → 09-配置与部署指南.md

**用户体验相关**:
- 如何生成用户友好消息？ → 11-AI报告生成器与消息格式化.md
- Developer/User模式如何切换？ → 11-AI报告生成器与消息格式化.md
- AI润色如何实现？ → 11-AI报告生成器与消息格式化.md

**缓存与复用相关**:
- 如何缓存成功的执行计划？ → 12-任务缓存与命中机制.md
- 缓存命中如何工作？ → 12-任务缓存与命中机制.md
- TaskExperience如何使用？ → 12-任务缓存与命中机制.md

**执行记录相关**:
- 如何记录执行过程？ → 13-上下文工程事件详解.md
- 如何实现自我验证？ → 13-上下文工程事件详解.md
- 成功/失败步骤如何分类记录？ → 13-上下文工程事件详解.md

**工作流相关**:
- 如何定义标准流程？ → 14-Workflow工作流管理.md
- 关键词匹配如何工作？ → 14-Workflow工作流管理.md
- 工作流如何引导LLM规划？ → 14-Workflow工作流管理.md

**服务治理相关**:
- 如何注册服务到Consul？ → 15-服务发现与注册.md
- 负载均衡策略有哪些？ → 15-服务发现与注册.md
- 如何发现远程服务？ → 15-服务发现与注册.md

**事件驱动相关**:
- 如何发送任务事件到Kafka？ → 16-Kafka事件系统.md
- 如何消费任务事件？ → 16-Kafka事件系统.md
- 审计日志如何记录？ → 16-Kafka事件系统.md

---

## 原项目文档参考

本迁移文档基于以下原项目文档编写：

| 原文档位置 | 内容 |
|-----------|------|
| `Core_document/项目简洁分布/核心模块清单.md` | 模块清单与代码统计 |
| `Core_document/项目实现细节相关的文档/1-数据槽位的智能流转.md` | 数据流转机制 |
| `Core_document/项目实现细节相关的文档/2-单步执行失败后的评估反思与重新规划.md` | 反思重规划机制 |
| `Core_document/项目实现细节相关的文档/4-两阶段规划架构与实现.md` | 两阶段规划 |
| `Core_document/项目实现细节相关的文档/10-语义路由机制与场景感知提示词系统设计文档.md` | 语义路由系统 |
| `Core_document/项目实现细节相关的文档/核心逻辑文档索引.md` | 文档索引 |
| `src/ai_reporter.rs` | AI报告生成器实现 |
| `src/message_formatter.rs` | 消息格式化实现 |
| `Core_document/每一版本迭代的核心改变/任务缓存与命中功能实现.md` | 任务缓存机制 |
| `Core_document/项目实现细节相关的文档/11-上下文工程事件实现细节.md` | 上下文工程事件 |
| `src/workflow/mod.rs` | 工作流管理模块 |
| `src/consul/discovery.rs` | 服务发现实现 |
| `src/consul/registry.rs` | 服务注册实现 |
| `src/kafka/producer.rs` | Kafka事件生产者 |
| `src/kafka/consumer.rs` | Kafka事件消费者 |
| `src/kafka/audit.rs` | 审计日志实现 |

---

## 版本历史

| 版本 | 日期 | 变更内容 |
|------|------|---------|
| v1.0 | 2026-01-05 | 初始版本，包含完整迁移文档 |
| v1.1 | 2026-01-05 | 添加补充文档：AI报告生成器、任务缓存、上下文工程事件 |
| v1.2 | 2026-01-05 | 添加补充文档：Workflow工作流、服务发现注册、Kafka事件系统 |
| v1.3 | 2026-01-14 | ✨ 重大更新：更新06文档（智能轮数管理），新增17/18/19文档（Plan-with-Files模式、移除轮数限制、动态参数推断） |
| v1.4 | 2026-01-14 | 📝 文档完善：更新02文档（v1.1）和05文档（v1.1），提示词模块扩展至12个，完善交叉引用 |

---

## 关键特性导航 (v1.3 新增)

### 智能决策与自适应

- **智能轮数管理** → [06-反思与重规划机制.md](./06-反思与重规划机制.md) (第8章)
- **移除轮数限制** → [18-移除轮数限制机制.md](./18-移除轮数限制机制.md)
- **提示词软性引导** → [18-移除轮数限制机制.md](./18-移除轮数限制机制.md) (第4章)

### 上下文工程与数据管理

- **Plan-with-Files模式** → [17-Plan-with-Files模式.md](./17-Plan-with-Files模式.md)
- **执行历史格式化** → [17-Plan-with-Files模式.md](./17-Plan-with-Files模式.md) (第3章)
- **执行统计摘要** → [17-Plan-with-Files模式.md](./17-Plan-with-Files模式.md) (第3.1节)

### 参数智能处理

- **动态参数推断** → [19-动态参数推断功能.md](./19-动态参数推断功能.md)
- **静态占位符解析** → [04-数据流转与参数解析机制.md](./04-数据流转与参数解析机制.md)

---

**文档维护者**: Task Orchestration Team
**最后更新**: 2026-01-14
