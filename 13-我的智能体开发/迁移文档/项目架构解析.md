# Task Orchestration Service - é¡¹ç›®æ¶æ„è§£æ

**ç‰ˆæœ¬**: v0.1.0
**ç”Ÿæˆæ—¥æœŸ**: 2026-01-13
**è¯­è¨€**: Rust 2021 Edition

---

## ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æ ¸å¿ƒæ¦‚å¿µä¸è®¾è®¡ç†å¿µ](#2-æ ¸å¿ƒæ¦‚å¿µä¸è®¾è®¡ç†å¿µ)
- [3. ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
- [4. æ ¸å¿ƒæ¨¡å—è¯¦è§£](#4-æ ¸å¿ƒæ¨¡å—è¯¦è§£)
- [5. å·¥ä½œæµç¨‹ä¸æ•°æ®æµ](#5-å·¥ä½œæµç¨‹ä¸æ•°æ®æµ)
- [6. æŠ€æœ¯æ ˆä¸ä¾èµ–](#6-æŠ€æœ¯æ ˆä¸ä¾èµ–)
- [7. é…ç½®ç®¡ç†](#7-é…ç½®ç®¡ç†)
- [8. éƒ¨ç½²æ¶æ„](#8-éƒ¨ç½²æ¶æ„)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®å®šä½

**Task Orchestration Service** æ˜¯ä¸€ä¸ªåŸºäº **åæ€è§„åˆ’ï¼ˆReflective Planningï¼‰** èŒƒå¼çš„æ™ºèƒ½ä»»åŠ¡ç¼–æ’æœåŠ¡ï¼Œé‡‡ç”¨ Rust å®ç°çš„ç”Ÿäº§çº§å¾®æœåŠ¡æ¶æ„ã€‚

### 1.2 æ ¸å¿ƒç‰¹æ€§

- âœ… **æ™ºèƒ½ä»»åŠ¡åˆ†è§£**: åŸºäº LLM çš„åŠ¨æ€ä»»åŠ¡è§„åˆ’ä¸åˆ†è§£
- âœ… **ä¸¤é˜¶æ®µè§„åˆ’**: å·¥å…·é€‰æ‹© + è¯¦ç»†è§„åˆ’çš„äºŒé˜¶æ®µç­–ç•¥
- âœ… **å¹¶è¡Œæ‰§è¡Œå¼•æ“**: DAG ä¾èµ–åˆ†æå’Œæ™ºèƒ½å¹¶è¡Œè°ƒåº¦
- âœ… **è‡ªé€‚åº”åæ€**: å¤±è´¥è‡ªåŠ¨åˆ†æã€æ ¹å› å®šä½ã€ç­–ç•¥è°ƒæ•´
- âœ… **æŒç»­å­¦ä¹ **: ä»»åŠ¡åè¯„ä¼°ï¼Œç»éªŒæå–ä¸çŸ¥è¯†æ²‰æ·€
- âœ… **å‚æ•°æ™ºèƒ½è§£æ**: å¤šæºå‚æ•°æ•´åˆ + LLM åŠ¨æ€æ¨æ–­
- âœ… **ä¼ä¸šçº§é›†æˆ**: Consul æœåŠ¡å‘ç°ã€Kafka äº‹ä»¶æµã€åˆ†å¸ƒå¼è¿½è¸ª

### 1.3 é¡¹ç›®ä¿¡æ¯

```toml
[package]
name = "task-orchestration-service"
version = "0.1.0"
edition = "2021"
authors = ["Task Orchestration Team"]
```

---

## 2. æ ¸å¿ƒæ¦‚å¿µä¸è®¾è®¡ç†å¿µ

### 2.1 åæ€è§„åˆ’ï¼ˆReflective Planningï¼‰èŒƒå¼

è¿™æ˜¯æœ¬é¡¹ç›®çš„æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼Œå®ç°äº†ä¸€ä¸ªåŠ¨æ€è¿­ä»£çš„ä»»åŠ¡æ‰§è¡Œå¾ªç¯ï¼š

```mermaid
graph TB
    Start([ç”¨æˆ·ä»»åŠ¡è¯·æ±‚]) --> Planning[ğŸ“‹ è§„åˆ’é˜¶æ®µ<br/>Planning]
    Planning --> Execution[âš™ï¸ æ‰§è¡Œé˜¶æ®µ<br/>Execution]
    Execution --> Evaluation[ğŸ“Š è¯„ä¼°é˜¶æ®µ<br/>Evaluation]
    Evaluation --> Decision{è¯„ä¼°ç»“æœ}

    Decision -->|æˆåŠŸ| PostEval[ğŸ“ ä»»åŠ¡åè¯„ä¼°<br/>Post-Task Evaluation]
    Decision -->|å¤±è´¥/éœ€æ”¹è¿›| Reflection[ğŸ” åæ€é˜¶æ®µ<br/>Reflection]

    Reflection --> Strategy{åæ€å†³ç­–}
    Strategy -->|é‡è¯•å•æ­¥| Execution
    Strategy -->|é‡æ–°è§„åˆ’| Planning
    Strategy -->|ç»§ç»­æ‰§è¡Œ| Execution
    Strategy -->|åœæ­¢| End([ä»»åŠ¡ç»“æŸ])

    PostEval --> End

    style Start fill:#e1f5e1
    style Planning fill:#fff4e6
    style Execution fill:#e3f2fd
    style Evaluation fill:#f3e5f5
    style Reflection fill:#ffe0b2
    style PostEval fill:#e8f5e9
    style End fill:#ffebee
```

### 2.2 ä»»åŠ¡çŠ¶æ€ç”Ÿå‘½å‘¨æœŸ

```mermaid
stateDiagram-v2
    [*] --> Pending: åˆ›å»ºä»»åŠ¡
    Pending --> Planning: å¼€å§‹è§„åˆ’
    Planning --> Executing: è§„åˆ’å®Œæˆ
    Executing --> Evaluating: æ‰§è¡Œå®Œæˆ
    Evaluating --> Reflecting: è¯„ä¼°ä¸é€šè¿‡
    Evaluating --> Completed: è¯„ä¼°é€šè¿‡
    Reflecting --> Planning: å†³ç­–é‡è§„åˆ’
    Reflecting --> Executing: å†³ç­–é‡è¯•
    Reflecting --> Failed: å†³ç­–åœæ­¢
    Completed --> [*]
    Failed --> [*]

    note right of Reflecting
        åæ€æœºåˆ¶è‡ªåŠ¨å†³å®š:
        - é‡è¯•å•æ­¥
        - é‡æ–°è§„åˆ’
        - ç»§ç»­æ‰§è¡Œ
        - åœæ­¢ä»»åŠ¡
    end note
```

**çŠ¶æ€è¯´æ˜**ï¼š

| çŠ¶æ€ | æè¿° | è§¦å‘æ¡ä»¶ |
|------|------|---------|
| `Pending` | ä»»åŠ¡å·²åˆ›å»ºï¼Œç­‰å¾…å¤„ç† | ä»»åŠ¡åˆå§‹åŒ– |
| `Planning` | æ­£åœ¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ | Orchestrator å¯åŠ¨è§„åˆ’ |
| `Executing` | æ­£åœ¨æ‰§è¡Œæ­¥éª¤ | è§„åˆ’å®Œæˆæˆ–åæ€å†³ç­–é‡è¯• |
| `Evaluating` | æ­£åœ¨è¯„ä¼°æ‰§è¡Œè´¨é‡ | æ‰§è¡Œå®Œæˆ |
| `Reflecting` | æ­£åœ¨æ·±åº¦åæ€åˆ†æ | è¯„ä¼°ä¸é€šè¿‡ |
| `Completed` | ä»»åŠ¡æˆåŠŸå®Œæˆ | è¯„ä¼°é€šè¿‡ |
| `Failed` | ä»»åŠ¡å¤±è´¥ | åæ€å†³ç­–åœæ­¢æˆ–è‡´å‘½é”™è¯¯ |

### 2.3 æ ¸å¿ƒç»„ä»¶åä½œå…³ç³»

```mermaid
graph LR
    Orchestrator[ç¼–æ’å™¨<br/>Orchestrator]

    Orchestrator --> Planner[è§„åˆ’å™¨<br/>Planner]
    Orchestrator --> Executor[æ‰§è¡Œå™¨<br/>Executor]
    Orchestrator --> Evaluator[è¯„ä¼°å™¨<br/>Evaluator]
    Orchestrator --> Reflector[åæ€å™¨<br/>Reflector]
    Orchestrator --> PostEval[ä»»åŠ¡åè¯„ä¼°å™¨<br/>PostTaskEvaluator]

    Planner --> LLM[LLM<br/>Service]
    Planner --> ToolSvc[Tool<br/>Service]
    Executor --> ToolSvc
    Executor --> ParallelExec[å¹¶è¡Œæ‰§è¡Œå™¨<br/>ParallelExecutor]
    Executor --> ParamResolver[å‚æ•°è§£æå™¨<br/>ParameterResolver]
    Evaluator --> LLM
    Reflector --> LLM
    PostEval --> LLM

    style Orchestrator fill:#ff6b6b,color:#fff
    style Planner fill:#4ecdc4
    style Executor fill:#45b7d1
    style Evaluator fill:#f7b731
    style Reflector fill:#5f27cd
    style PostEval fill:#00d2d3
```

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å®¢æˆ·ç«¯å±‚ Client Layer"
        RestClient[REST Client]
        GrpcClient[gRPC Client]
        WebUI[Web UI]
    end

    subgraph "æ¥å£å±‚ API Layer"
        RestAPI[REST API<br/>Axum]
        GrpcAPI[gRPC API<br/>Tonic]
        Health[Health Check]
    end

    subgraph "æ ¸å¿ƒç¼–æ’å±‚ Core Orchestration Layer"
        Orchestrator[ç¼–æ’å™¨ Orchestrator<br/>165KB]
        Planner[è§„åˆ’å™¨ Planner<br/>100KB]
        Executor[æ‰§è¡Œå™¨ Executor<br/>107KB]
        ParallelExec[å¹¶è¡Œæ‰§è¡Œå™¨<br/>31KB]
        Evaluator[è¯„ä¼°å™¨<br/>20KB]
        Reflector[åæ€å™¨<br/>42KB]
        PostEval[ä»»åŠ¡åè¯„ä¼°å™¨<br/>22KB]
        ParamResolver[å‚æ•°è§£æå™¨<br/>61KB]
        ExecContext[æ‰§è¡Œä¸Šä¸‹æ–‡<br/>22KB]
    end

    subgraph "æœåŠ¡é›†æˆå±‚ Service Integration Layer"
        LLMClient[LLM Client<br/>ç»Ÿä¸€å®¢æˆ·ç«¯]
        ToolClient[Tool Service Client<br/>ç»Ÿä¸€å®¢æˆ·ç«¯]
        DBClient[Database Client]
        WorkflowMgr[Workflow Manager]
    end

    subgraph "åŸºç¡€è®¾æ–½å±‚ Infrastructure Layer"
        Consul[Consul<br/>æœåŠ¡å‘ç°]
        Kafka[Kafka<br/>äº‹ä»¶æµ]
        Logger[Kafka Logger<br/>é›†ä¸­æ—¥å¿—]
        Config[Config Manager<br/>é…ç½®ç®¡ç†]
        StateManager[State Manager<br/>çŠ¶æ€ç®¡ç†]
    end

    subgraph "å¤–éƒ¨æœåŠ¡ External Services"
        LLMService[LLM Service<br/>Qwen/GLM]
        ToolService[Tool Service<br/>å·¥å…·æ‰§è¡Œ]
        DBService[Database Service<br/>æŒä¹…åŒ–]
    end

    RestClient --> RestAPI
    GrpcClient --> GrpcAPI
    WebUI --> RestAPI

    RestAPI --> Orchestrator
    GrpcAPI --> Orchestrator

    Orchestrator --> Planner
    Orchestrator --> Executor
    Orchestrator --> Evaluator
    Orchestrator --> Reflector
    Orchestrator --> PostEval

    Planner --> LLMClient
    Planner --> ToolClient
    Planner --> WorkflowMgr

    Executor --> ToolClient
    Executor --> ParallelExec
    Executor --> ParamResolver
    Executor --> ExecContext

    Evaluator --> LLMClient
    Reflector --> LLMClient
    PostEval --> LLMClient

    LLMClient --> Consul
    ToolClient --> Consul
    DBClient --> Consul

    LLMClient --> LLMService
    ToolClient --> ToolService
    DBClient --> DBService

    Orchestrator --> StateManager
    Orchestrator --> Logger
    Orchestrator --> Kafka

    StateManager --> DBClient

    style Orchestrator fill:#ff6b6b,color:#fff
    style Planner fill:#4ecdc4
    style Executor fill:#45b7d1
    style Evaluator fill:#f7b731
    style Reflector fill:#5f27cd
```

### 3.2 åˆ†å±‚æ¶æ„

```mermaid
graph TD
    subgraph "Layer 1: API æ¥å£å±‚"
        A1[REST API<br/>HTTP/JSON]
        A2[gRPC API<br/>Protocol Buffers]
        A3[Health & Metrics]
    end

    subgraph "Layer 2: ç¼–æ’åè°ƒå±‚"
        B1[Orchestrator<br/>ä¸»ç¼–æ’å™¨]
    end

    subgraph "Layer 3: æ ¸å¿ƒèƒ½åŠ›å±‚"
        C1[Planner<br/>æ™ºèƒ½è§„åˆ’]
        C2[Executor<br/>å¹¶è¡Œæ‰§è¡Œ]
        C3[Evaluator<br/>è´¨é‡è¯„ä¼°]
        C4[Reflector<br/>æ·±åº¦åæ€]
    end

    subgraph "Layer 4: æ”¯æ’‘æœåŠ¡å±‚"
        D1[LLM Integration<br/>21ä¸ªæç¤ºè¯æ¨¡å—]
        D2[Tool Integration<br/>å·¥å…·æœåŠ¡é›†æˆ]
        D3[State Management<br/>çŠ¶æ€ç®¡ç†]
        D4[Workflow Management<br/>å·¥ä½œæµç®¡ç†]
    end

    subgraph "Layer 5: åŸºç¡€è®¾æ–½å±‚"
        E1[Service Discovery<br/>Consul]
        E2[Event Streaming<br/>Kafka]
        E3[Logging<br/>Kafka Logger]
        E4[Configuration<br/>Config Manager]
    end

    A1 --> B1
    A2 --> B1
    A3 --> B1

    B1 --> C1
    B1 --> C2
    B1 --> C3
    B1 --> C4

    C1 --> D1
    C1 --> D2
    C1 --> D4
    C2 --> D2
    C2 --> D3
    C3 --> D1
    C4 --> D1

    D1 --> E1
    D2 --> E1
    D3 --> E4

    B1 --> E2
    B1 --> E3
```

---

## 4. æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 4.1 Orchestrator - ä¸»ç¼–æ’å™¨

**æ–‡ä»¶**: [src/core/orchestrator.rs](src/core/orchestrator.rs) (165KB)

**æ ¸å¿ƒèŒè´£**:
- ç»Ÿç­¹åè°ƒæ‰€æœ‰æ ¸å¿ƒç»„ä»¶ï¼ˆPlannerã€Executorã€Evaluatorã€Reflectorï¼‰
- ç®¡ç†ä»»åŠ¡çŠ¶æ€è½¬æ¢å’Œç”Ÿå‘½å‘¨æœŸ
- æ§åˆ¶åæ€å¾ªç¯æµç¨‹ï¼Œå†³ç­–æ˜¯å¦ç»§ç»­/é‡è¯•/é‡è§„åˆ’
- æ„å»ºä¸Šä¸‹æ–‡å·¥ç¨‹äº‹ä»¶ï¼ˆContext Engineering Eventsï¼‰
- å‘é€æµå¼äº‹ä»¶ç»™å®¢æˆ·ç«¯

**å…³é”®æ–¹æ³•**:

```rust
// ä¸»å…¥å£ï¼šæ‰§è¡Œä»»åŠ¡ï¼ˆå¸¦å…ƒæ•°æ®ï¼‰
pub async fn orchestrate_with_metadata(
    &self,
    task_description: String,
    metadata: HashMap<String, String>,
) -> Result<OrchestrationResult>

// æ ¸å¿ƒå¾ªç¯ï¼šåæ€è§„åˆ’å¾ªç¯
async fn reflective_planning_loop(
    &self,
    task: &mut Task,
    execution_context: &ExecutionContext,
) -> Result<()>
```

**ä¸Šä¸‹æ–‡å·¥ç¨‹äº‹ä»¶æ„å»ºå™¨**:

```rust
pub struct ContextEngineeringEventBuilder {
    task_description: String,
    successful_steps: Vec<SuccessfulStepData>,
    failed_steps: Vec<FailedStepData>,
    current_round: u32,
    total_step_retries: u32,
    total_task_replans: u32,
}
```

### 4.2 Planner - è§„åˆ’å™¨

**æ–‡ä»¶**: [src/core/planner.rs](src/core/planner.rs) (100KB)

**æ ¸å¿ƒèŒè´£**:
- å°†ä»»åŠ¡æè¿°åˆ†è§£ä¸ºå¯æ‰§è¡Œæ­¥éª¤åºåˆ—
- å®ç°ä¸¤é˜¶æ®µè§„åˆ’ï¼ˆå·¥å…·é€‰æ‹© â†’ è¯¦ç»†è§„åˆ’ï¼‰
- å†…ç½®å·¥ä½œæµåŒ¹é…å’Œè¯­ä¹‰è·¯ç”±
- å·¥å…·ç­›é€‰ï¼ˆåŸºäºç›¸ä¼¼åº¦é˜ˆå€¼ï¼‰
- æ”¯æŒç»§ç»­è§„åˆ’ï¼ˆContinue Planningï¼‰

**ä¸¤é˜¶æ®µè§„åˆ’æµç¨‹**:

```mermaid
sequenceDiagram
    participant P as Planner
    participant TS as Tool Service
    participant LLM as LLM Service

    Note over P: é˜¶æ®µ1: å·¥å…·é€‰æ‹©
    P->>TS: æŸ¥è¯¢æ‰€æœ‰å¯ç”¨å·¥å…·
    TS-->>P: è¿”å›å·¥å…·åˆ—è¡¨
    P->>P: ç›¸ä¼¼åº¦è¿‡æ»¤ï¼ˆé˜ˆå€¼é…ç½®ï¼‰
    P->>LLM: å·¥å…·é€‰æ‹©æç¤ºè¯ + è¿‡æ»¤åå·¥å…·
    LLM-->>P: è¿”å›é€‰å®šå·¥å…·åˆ—è¡¨

    Note over P: é˜¶æ®µ2: è¯¦ç»†è§„åˆ’
    P->>LLM: è§„åˆ’æç¤ºè¯ + é€‰å®šå·¥å…·
    LLM-->>P: è¿”å›æ‰§è¡Œè®¡åˆ’ï¼ˆJSONï¼‰
    P->>P: è§£æè®¡åˆ’ï¼Œæ„å»ºä¾èµ–å›¾
```

**å…³é”®é…ç½®**:

```rust
pub struct Planner {
    enable_two_stage_planning: bool,        // æ˜¯å¦å¯ç”¨ä¸¤é˜¶æ®µè§„åˆ’
    two_stage_tool_threshold: usize,        // å·¥å…·æ•°é‡é˜ˆå€¼
    enable_builtin_workflows: bool,         // æ˜¯å¦å¯ç”¨å†…ç½®å·¥ä½œæµ
    tool_selection_threshold: f32,          // å·¥å…·ç­›é€‰ç›¸ä¼¼åº¦é˜ˆå€¼ (0-100)
    response_mode: ResponseMode,            // å“åº”æ¨¡å¼
    enable_streaming: bool,                 // æ˜¯å¦å¯ç”¨æµå¼è¿”å›
}
```

**è¯­ä¹‰è·¯ç”±**:

ä»ä»»åŠ¡æè¿°ä¸­æå–æ„å›¾æ ‡è®°ï¼š

```rust
fn extract_intent_from_task(task_description: &str) -> Option<String>
```

æ”¯æŒæ ¼å¼ï¼š
- `"æ„å›¾: æ•°æ®æŸ¥è¯¢, ç”¨æˆ·è¾“å…¥: ..."`
- `"Intent: device_control"`

### 4.3 Executor - æ‰§è¡Œå™¨

**æ–‡ä»¶**: [src/core/executor.rs](src/core/executor.rs) (107KB)

**æ ¸å¿ƒèŒè´£**:
- é¡ºåºæˆ–å¹¶è¡Œæ‰§è¡Œè®¡åˆ’æ­¥éª¤
- é€šè¿‡ Tool Service è°ƒç”¨å·¥å…·
- å‚æ•°è§£æä¸åŠ¨æ€æ¨æ–­
- æ‰§è¡Œè¶…æ—¶æ§åˆ¶
- ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡

**æ‰§è¡Œæµç¨‹**:

```mermaid
sequenceDiagram
    participant E as Executor
    participant PE as ParallelExecutor
    participant PR as ParameterResolver
    participant TS as Tool Service
    participant EC as ExecutionContext

    E->>E: æ£€æŸ¥æ˜¯å¦å¯ç”¨å¹¶è¡Œæ‰§è¡Œ

    alt å¹¶è¡Œæ‰§è¡Œ
        E->>PE: execute_plan_parallel()
        PE->>PE: æ„å»º DAG ä¾èµ–å›¾
        PE->>PE: æ‹“æ‰‘æ’åºï¼Œè¯†åˆ«æ‰¹æ¬¡
        loop æ¯ä¸ªæ‰¹æ¬¡
            PE->>E: å¹¶å‘æ‰§è¡Œæ­¥éª¤
            E->>PR: è§£æå‚æ•°
            PR-->>E: è¿”å›è§£æåå‚æ•°
            E->>TS: è°ƒç”¨å·¥å…·
            TS-->>E: è¿”å›æ‰§è¡Œç»“æœ
            E->>EC: è®°å½•æ­¥éª¤ç»“æœ
        end
    else é¡ºåºæ‰§è¡Œ
        loop æ¯ä¸ªæ­¥éª¤
            E->>PR: è§£æå‚æ•°
            PR-->>E: è¿”å›è§£æåå‚æ•°
            E->>TS: è°ƒç”¨å·¥å…·
            TS-->>E: è¿”å›æ‰§è¡Œç»“æœ
            E->>EC: è®°å½•æ­¥éª¤ç»“æœ
        end
    end
```

**é…ç½®é¡¹**:

```rust
pub struct Executor {
    enable_parallel: bool,                      // æ˜¯å¦å¯ç”¨å¹¶è¡Œæ‰§è¡Œ
    parallel_max_concurrent: usize,             // æœ€å¤§å¹¶å‘æ­¥éª¤æ•°
    parallel_min_steps: usize,                  // è§¦å‘å¹¶è¡Œçš„æœ€å°æ­¥éª¤æ•°
    enable_dynamic_parameter_inference: bool,   // åŠ¨æ€å‚æ•°æ¨æ–­
    execution_timeout: Duration,                // æ‰§è¡Œè¶…æ—¶
}
```

### 4.4 ParallelExecutor - å¹¶è¡Œæ‰§è¡Œå™¨

**æ–‡ä»¶**: [src/core/parallel_executor.rs](src/core/parallel_executor.rs) (31KB)

**æ ¸å¿ƒèŒè´£**:
- æ„å»ºæ­¥éª¤ä¾èµ–å›¾ï¼ˆDAGï¼‰
- æ‹“æ‰‘æ’åºè¯†åˆ«å¹¶è¡Œæ‰¹æ¬¡
- ä½¿ç”¨ Semaphore æ§åˆ¶å¹¶å‘æ•°
- æ‰¹æ¬¡é—´ä¸²è¡Œç­‰å¾…

**å¹¶è¡Œæ‰§è¡Œç­–ç•¥**:

```mermaid
graph TB
    subgraph "Batch 1 (å¹¶è¡Œæ‰§è¡Œ)"
        S1[Step 1]
        S2[Step 2]
        S3[Step 3]
    end

    subgraph "Batch 2 (å¹¶è¡Œæ‰§è¡Œ)"
        S4[Step 4]
        S5[Step 5]
    end

    subgraph "Batch 3 (å¹¶è¡Œæ‰§è¡Œ)"
        S6[Step 6]
    end

    S1 --> S4
    S2 --> S4
    S3 --> S5
    S4 --> S6
    S5 --> S6

    style S1 fill:#e3f2fd
    style S2 fill:#e3f2fd
    style S3 fill:#e3f2fd
    style S4 fill:#fff4e6
    style S5 fill:#fff4e6
    style S6 fill:#f3e5f5
```

**å…³é”®æ–¹æ³•**:

```rust
// æ„å»ºä¾èµ–å›¾
fn build_dependency_graph(plan: &ExecutionPlan) -> HashMap<String, Vec<String>>

// æ‹“æ‰‘æ’åº
fn topological_sort(graph: &HashMap<String, Vec<String>>) -> Vec<Vec<String>>

// å¹¶è¡Œæ‰§è¡Œè®¡åˆ’
pub async fn execute_plan_parallel(&self, plan: ExecutionPlan) -> Result<PlanExecutionResult>
```

### 4.5 Evaluator - è¯„ä¼°å™¨

**æ–‡ä»¶**: [src/core/evaluator.rs](src/core/evaluator.rs) (20KB)

**æ ¸å¿ƒèŒè´£**:
- å¤šç»´åº¦è¯„ä¼°æ‰§è¡Œè´¨é‡
- æ‰“åˆ†ï¼ˆ0-100ï¼‰
- ç”Ÿæˆ Markdown è¯„ä¼°æŠ¥å‘Š
- åˆ¤æ–­æ˜¯å¦éœ€è¦åæ€

**è¯„ä¼°ç»´åº¦**:

```rust
pub struct EvaluationDimensions {
    pub completeness: f32,      // å®Œæ•´æ€§ (0-100)
    pub correctness: f32,       // æ­£ç¡®æ€§ (0-100)
    pub efficiency: f32,        // æ•ˆç‡ (0-100)
    pub reliability: f32,       // å¯é æ€§ (0-100)
}
```

**è¯„ä¼°ç»“æœ**:

```rust
pub struct EvaluationResult {
    pub evaluation_id: String,
    pub overall_score: f32,                     // æ€»ä½“è¯„åˆ†
    pub is_successful: bool,                    // æ˜¯å¦æˆåŠŸ
    pub dimensions: EvaluationDimensions,       // å„ç»´åº¦è¯„åˆ†
    pub successes: Vec<String>,                 // æˆåŠŸæ–¹é¢
    pub failures: Vec<String>,                  // å¤±è´¥æ–¹é¢
    pub improvement_suggestions: Vec<String>,   // æ”¹è¿›å»ºè®®
}
```

### 4.6 Reflector - åæ€å™¨

**æ–‡ä»¶**: [src/core/reflector.rs](src/core/reflector.rs) (42KB)

**æ ¸å¿ƒèŒè´£**:
- å¤±è´¥åŸå› æ ¹å› åˆ†æ
- å•æ­¥åæ€ï¼ˆStep-level Reflectionï¼‰
- å…¨å±€åæ€ï¼ˆFull Reflectionï¼‰
- ç”Ÿæˆæ›¿ä»£æ–¹æ¡ˆ
- å†³ç­–ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**åæ€ç±»å‹**:

```mermaid
graph TD
    Start[æ‰§è¡Œå¤±è´¥] --> Check{å¤±è´¥ç±»å‹?}

    Check -->|å•ä¸ªæ­¥éª¤å¤±è´¥| StepReflection[å•æ­¥åæ€]
    Check -->|å¤šæ­¥éª¤å¤±è´¥/æ•´ä½“é—®é¢˜| FullReflection[å…¨å±€åæ€]

    StepReflection --> StepAction{æ‰§è¡Œå†³ç­–}
    FullReflection --> FullAction{æ‰§è¡Œå†³ç­–}

    StepAction -->|é‡è¯•å•æ­¥| Retry1[RetryWithAdjustedParams<br/>RetryWithAlternativeTool]
    StepAction -->|é‡è§„åˆ’| Replan1[ReplanEntireTask]
    StepAction -->|åœæ­¢| Stop1[StopExecution]

    FullAction -->|é‡è§„åˆ’| Replan2[ç”Ÿæˆæ–°è®¡åˆ’]
    FullAction -->|åœæ­¢| Stop2[æ ‡è®°ä»»åŠ¡å¤±è´¥]

    style StepReflection fill:#ffe0b2
    style FullReflection fill:#f3e5f5
```

**å•æ­¥åæ€**:

```rust
pub struct StepReflection {
    pub reflection_id: String,
    pub step_id: String,
    pub root_cause: String,                 // æ ¹æœ¬åŸå› 
    pub root_cause_category: String,        // åŸå› åˆ†ç±»
    pub suggested_action: StepAction,       // å»ºè®®è¡ŒåŠ¨
    pub confidence: f32,                    // å¯ä¿¡åº¦ (0-100)
    pub analysis: String,                   // è¯¦ç»†åˆ†æ
    pub alternative_solutions: Vec<String>, // å¤‡é€‰æ–¹æ¡ˆ
    pub is_recoverable: bool,               // æ˜¯å¦å¯æ¢å¤
}
```

**æ‰§è¡Œå†³ç­–**:

```rust
pub enum StepAction {
    RetryWithAdjustedParams(HashMap<String, String>),  // è°ƒæ•´å‚æ•°é‡è¯•
    RetryWithAlternativeTool(String),                  // ä½¿ç”¨å¤‡é€‰å·¥å…·
    ReplanEntireTask,                                   // é‡æ–°è§„åˆ’
    StopExecution,                                      // åœæ­¢æ‰§è¡Œ
}
```

### 4.7 PostTaskEvaluator - ä»»åŠ¡åè¯„ä¼°å™¨

**æ–‡ä»¶**: [src/core/post_task_evaluator.rs](src/core/post_task_evaluator.rs) (22KB)

**æ ¸å¿ƒèŒè´£**:
- ä»å®Œæˆçš„ä»»åŠ¡ä¸­æå–ç»éªŒ
- è¯†åˆ«æˆåŠŸæ¨¡å¼å’Œå¤±è´¥æ•™è®­
- ç”ŸæˆçŸ¥è¯†æ–‡æ¡£
- ä¸ºæœªæ¥ç›¸ä¼¼ä»»åŠ¡æä¾›å‚è€ƒ

**è¯„ä¼°ç»“æœç»“æ„**:

```rust
pub struct PostTaskEvaluation {
    pub task_summary: String,               // ä»»åŠ¡æ‘˜è¦
    pub execution_highlights: Vec<String>,  // æ‰§è¡Œäº®ç‚¹
    pub challenges_faced: Vec<String>,      // é‡åˆ°çš„æŒ‘æˆ˜
    pub solutions_applied: Vec<String>,     // åº”ç”¨çš„è§£å†³æ–¹æ¡ˆ
    pub best_practices: Vec<BestPractice>,  // æœ€ä½³å®è·µ
    pub anti_patterns: Vec<AntiPattern>,    // åæ¨¡å¼
    pub tool_effectiveness: Vec<ToolMemo>,  // å·¥å…·æ•ˆèƒ½è®°å½•
    pub scores: EvaluationScores,           // è¯„åˆ†
    pub recommendations: Vec<String>,       // å»ºè®®
}
```

### 4.8 ParameterResolver - å‚æ•°è§£æå™¨

**æ–‡ä»¶**: [src/core/parameter_resolver.rs](src/core/parameter_resolver.rs) (61KB)

**æ ¸å¿ƒèŒè´£**:
- æ™ºèƒ½å‚æ•°æå–
- å¤šæ¥æºå‚æ•°æ•´åˆ
- JSON å€¼è½¬æ¢
- å‚æ•°å ä½ç¬¦æ›¿æ¢ï¼ˆ`$step_N.field`ï¼‰

**å‚æ•°è§£æä¼˜å…ˆçº§**:

```mermaid
graph TD
    Start[éœ€è¦è§£æå‚æ•°] --> P1{æ£€æŸ¥é™æ€å‚æ•°}
    P1 -->|æ‰¾åˆ°| UseStatic[ä½¿ç”¨é™æ€å‚æ•°]
    P1 -->|æœªæ‰¾åˆ°| P2{æ£€æŸ¥å…ƒæ•°æ®}

    P2 -->|æ‰¾åˆ°| UseMeta[ä½¿ç”¨å…ƒæ•°æ®]
    P2 -->|æœªæ‰¾åˆ°| P3{æ£€æŸ¥æ­¥éª¤å¼•ç”¨}

    P3 -->|æ‰¾åˆ°| UseStep[ä»æ‰§è¡Œä¸Šä¸‹æ–‡æå–]
    P3 -->|æœªæ‰¾åˆ°| P4{å¯ç”¨åŠ¨æ€æ¨æ–­?}

    P4 -->|æ˜¯| LLMInfer[LLM åŠ¨æ€æ¨æ–­]
    P4 -->|å¦| Error[è¿”å›é”™è¯¯: ç¼ºå°‘å‚æ•°]

    UseStatic --> End[å‚æ•°è§£æå®Œæˆ]
    UseMeta --> End
    UseStep --> End
    LLMInfer --> End

    style UseStatic fill:#e8f5e9
    style UseMeta fill:#e3f2fd
    style UseStep fill:#fff4e6
    style LLMInfer fill:#f3e5f5
    style Error fill:#ffebee
```

**å‚æ•°å¼•ç”¨æ ¼å¼**:

- `$step_1.result` - å¼•ç”¨æ­¥éª¤ 1 çš„å®Œæ•´ç»“æœ
- `$step_2.data.temperature` - å¼•ç”¨åµŒå¥—å­—æ®µ
- `$metadata.user_id` - å¼•ç”¨å…ƒæ•°æ®å­—æ®µ

### 4.9 ExecutionContext - æ‰§è¡Œä¸Šä¸‹æ–‡

**æ–‡ä»¶**: [src/core/execution_context.rs](src/core/execution_context.rs) (22KB)

**æ ¸å¿ƒèŒè´£**:
- ç»´æŠ¤æ‰§è¡Œå†å²
- å­˜å‚¨æ­¥éª¤ç»“æœ
- ç®¡ç†å…ƒæ•°æ®æµè½¬
- æ”¯æŒå˜é‡æ›¿æ¢

**æ•°æ®ç»“æ„**:

```rust
pub struct ExecutionContext {
    initial_metadata: Arc<RwLock<HashMap<String, String>>>,     // åˆå§‹å…ƒæ•°æ®
    runtime_metadata: Arc<RwLock<HashMap<String, String>>>,     // è¿è¡Œæ—¶å…ƒæ•°æ®
    step_results: Arc<RwLock<HashMap<String, StepExecutionResult>>>, // æ­¥éª¤ç»“æœ
    plan_id: Arc<RwLock<String>>,                               // è®¡åˆ’ ID
}
```

**å…ƒæ•°æ®æµè½¬æœºåˆ¶**:

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·è¯·æ±‚
    participant IC as Initial Context
    participant Executor as æ‰§è¡Œå™¨
    participant RC as Runtime Context
    participant Step as æ‰§è¡Œæ­¥éª¤

    User->>IC: æäº¤ metadata
    Note over IC: åˆå§‹å…ƒæ•°æ®<br/>ä¿æŒä¸å˜

    Executor->>Step: æ‰§è¡Œæ­¥éª¤1
    Step-->>Executor: è¿”å›ç»“æœ + æå–å­—æ®µ
    Executor->>RC: æ›´æ–° runtime_metadata

    Executor->>Step: æ‰§è¡Œæ­¥éª¤2
    Note over Step: å¯ä½¿ç”¨ initial_metadata<br/>å’Œ runtime_metadata
    Step-->>Executor: è¿”å›ç»“æœ
    Executor->>RC: ç»§ç»­ç´¯ç§¯
```

---

## 5. å·¥ä½œæµç¨‹ä¸æ•°æ®æµ

### 5.1 å®Œæ•´ä»»åŠ¡æ‰§è¡Œæµç¨‹

```mermaid
sequenceDiagram
    autonumber
    participant Client as å®¢æˆ·ç«¯
    participant API as API Layer
    participant Orch as Orchestrator
    participant Plan as Planner
    participant Exec as Executor
    participant Eval as Evaluator
    participant Refl as Reflector
    participant Post as PostTaskEvaluator

    Client->>API: POST /api/v1/tasks
    API->>Orch: orchestrate_with_metadata()

    Note over Orch: åˆå§‹åŒ–ä»»åŠ¡çŠ¶æ€
    Orch->>Plan: generate_plan()
    Plan->>Plan: å·¥ä½œæµåŒ¹é…

    alt åŒ¹é…åˆ°å†…ç½®å·¥ä½œæµ
        Plan-->>Orch: ç›´æ¥è¿”å›å·¥ä½œæµæ¨¡æ¿
    else éœ€è¦ LLM è§„åˆ’
        Plan->>Plan: ä¸¤é˜¶æ®µè§„åˆ’
        Note over Plan: é˜¶æ®µ1: å·¥å…·é€‰æ‹©<br/>é˜¶æ®µ2: è¯¦ç»†è§„åˆ’
        Plan-->>Orch: è¿”å›æ‰§è¡Œè®¡åˆ’
    end

    Orch->>Exec: execute_plan()

    alt å¯ç”¨å¹¶è¡Œæ‰§è¡Œ
        Exec->>Exec: DAG åˆ†æå’Œå¹¶è¡Œè°ƒåº¦
    else é¡ºåºæ‰§è¡Œ
        Exec->>Exec: é€æ­¥æ‰§è¡Œ
    end

    Exec-->>Orch: è¿”å›æ‰§è¡Œç»“æœ

    Orch->>Eval: evaluate()
    Eval-->>Orch: è¯„ä¼°ç»“æœ

    alt è¯„ä¼°é€šè¿‡
        Orch->>Post: evaluate_completed_task()
        Post-->>Orch: ç»éªŒæå–
        Orch-->>API: ä»»åŠ¡å®Œæˆ
    else è¯„ä¼°ä¸é€šè¿‡
        Orch->>Refl: reflect()

        alt å•æ­¥å¤±è´¥
            Refl->>Refl: å•æ­¥åæ€
            Refl-->>Orch: RetryWithAdjustedParams
            Orch->>Exec: é‡æ–°æ‰§è¡Œå¤±è´¥æ­¥éª¤
        else æ•´ä½“å¤±è´¥
            Refl->>Refl: å…¨å±€åæ€
            Refl-->>Orch: ReplanEntireTask
            Orch->>Plan: replan()
        end

        Note over Orch: å¾ªç¯ç›´è‡³æˆåŠŸæˆ–åœæ­¢
    end

    API-->>Client: è¿”å›ä»»åŠ¡ç»“æœ
```

### 5.2 ä¸¤é˜¶æ®µè§„åˆ’è¯¦ç»†æµç¨‹

```mermaid
flowchart TD
    Start([å¼€å§‹è§„åˆ’]) --> CheckWorkflow{æ£€æŸ¥å†…ç½®å·¥ä½œæµ}

    CheckWorkflow -->|åŒ¹é…| UseWorkflow[ä½¿ç”¨å·¥ä½œæµæ¨¡æ¿]
    CheckWorkflow -->|ä¸åŒ¹é…| CheckToolCount{å·¥å…·æ•°é‡æ£€æŸ¥}

    UseWorkflow --> End([è¿”å›è®¡åˆ’])

    CheckToolCount -->|æ•°é‡ < é˜ˆå€¼| DirectPlan[ç›´æ¥è§„åˆ’]
    CheckToolCount -->|æ•°é‡ >= é˜ˆå€¼| TwoStage[ä¸¤é˜¶æ®µè§„åˆ’]

    DirectPlan --> LLMPlan1[LLM ç”Ÿæˆè®¡åˆ’]
    LLMPlan1 --> End

    TwoStage --> Stage1[é˜¶æ®µ1: å·¥å…·é€‰æ‹©]
    Stage1 --> QueryTools[æŸ¥è¯¢æ‰€æœ‰å·¥å…·]
    QueryTools --> FilterTools[ç›¸ä¼¼åº¦è¿‡æ»¤]
    FilterTools --> LLMSelect[LLM é€‰æ‹©å·¥å…·]
    LLMSelect --> Stage2[é˜¶æ®µ2: è¯¦ç»†è§„åˆ’]
    Stage2 --> LLMPlan2[LLM ç”Ÿæˆè®¡åˆ’<br/>ä»…ä½¿ç”¨é€‰å®šå·¥å…·]
    LLMPlan2 --> ParsePlan[è§£æè®¡åˆ’<br/>æ„å»ºä¾èµ–å›¾]
    ParsePlan --> End

    style Start fill:#e1f5e1
    style Stage1 fill:#fff4e6
    style Stage2 fill:#e3f2fd
    style End fill:#e8f5e9
```

### 5.3 å¹¶è¡Œæ‰§è¡Œ DAG æµç¨‹

```mermaid
flowchart TD
    Start([æ¥æ”¶æ‰§è¡Œè®¡åˆ’]) --> BuildDAG[æ„å»ºä¾èµ–å›¾ DAG]

    BuildDAG --> AnalyzeDeps[åˆ†ææ­¥éª¤ä¾èµ–å…³ç³»]
    AnalyzeDeps --> TopoSort[æ‹“æ‰‘æ’åº]
    TopoSort --> IdentifyBatches[è¯†åˆ«å¹¶è¡Œæ‰¹æ¬¡]

    IdentifyBatches --> Batch1{Batch 1}

    Batch1 --> Concurrent1[å¹¶å‘æ‰§è¡Œæ­¥éª¤<br/>Semaphore æ§åˆ¶å¹¶å‘æ•°]
    Concurrent1 --> Wait1[ç­‰å¾…æ‰¹æ¬¡å®Œæˆ]

    Wait1 --> Batch2{Batch 2}
    Batch2 --> Concurrent2[å¹¶å‘æ‰§è¡Œæ­¥éª¤]
    Concurrent2 --> Wait2[ç­‰å¾…æ‰¹æ¬¡å®Œæˆ]

    Wait2 --> MoreBatches{è¿˜æœ‰æ‰¹æ¬¡?}
    MoreBatches -->|æ˜¯| NextBatch[ä¸‹ä¸€æ‰¹æ¬¡]
    NextBatch --> Concurrent2

    MoreBatches -->|å¦| Aggregate[æ±‡æ€»æ‰€æœ‰ç»“æœ]
    Aggregate --> End([è¿”å›æ‰§è¡Œç»“æœ])

    style BuildDAG fill:#e3f2fd
    style Concurrent1 fill:#fff4e6
    style Concurrent2 fill:#fff4e6
    style End fill:#e8f5e9
```

### 5.4 åæ€å¾ªç¯å†³ç­–æµç¨‹

```mermaid
flowchart TD
    Start([è¯„ä¼°ä¸é€šè¿‡]) --> Reflect[å¯åŠ¨åæ€å™¨]

    Reflect --> CheckFailType{å¤±è´¥ç±»å‹åˆ†æ}

    CheckFailType -->|å•ä¸ªæ­¥éª¤å¤±è´¥| StepReflect[å•æ­¥åæ€]
    CheckFailType -->|å¤šæ­¥éª¤/æ•´ä½“å¤±è´¥| FullReflect[å…¨å±€åæ€]

    StepReflect --> StepAnalysis[æ ¹å› åˆ†æ<br/>å‚æ•°/å·¥å…·/ä¾èµ–é”™è¯¯]
    StepAnalysis --> StepDecision{å†³ç­–}

    StepDecision -->|å¯æ¢å¤| RetryStep[é‡è¯•å•æ­¥<br/>è°ƒæ•´å‚æ•°æˆ–æ¢å·¥å…·]
    StepDecision -->|ä¸å¯æ¢å¤| ReplanTask1[é‡æ–°è§„åˆ’]

    FullReflect --> FullAnalysis[æ•´ä½“ç­–ç•¥åˆ†æ<br/>ä»»åŠ¡åˆ†è§£é”™è¯¯]
    FullAnalysis --> FullDecision{å†³ç­–}

    FullDecision --> ReplanTask2[é‡æ–°è§„åˆ’]

    RetryStep --> Execute[æ‰§è¡Œå™¨é‡è¯•]
    ReplanTask1 --> Planner1[è§„åˆ’å™¨é‡æ–°è§„åˆ’]
    ReplanTask2 --> Planner1

    Execute --> Eval1[è¯„ä¼°]
    Planner1 --> Execute2[æ‰§è¡Œæ–°è®¡åˆ’]
    Execute2 --> Eval2[è¯„ä¼°]

    Eval1 --> CheckSuccess1{æˆåŠŸ?}
    Eval2 --> CheckSuccess2{æˆåŠŸ?}

    CheckSuccess1 -->|æ˜¯| Success([ä»»åŠ¡å®Œæˆ])
    CheckSuccess1 -->|å¦| LLMDecide{LLM å†³å®šç»§ç»­?}

    CheckSuccess2 -->|æ˜¯| Success
    CheckSuccess2 -->|å¦| LLMDecide

    LLMDecide -->|ç»§ç»­| Reflect
    LLMDecide -->|åœæ­¢| Failed([ä»»åŠ¡å¤±è´¥])

    style StepReflect fill:#ffe0b2
    style FullReflect fill:#f3e5f5
    style Success fill:#e8f5e9
    style Failed fill:#ffebee
```

---

## 6. æŠ€æœ¯æ ˆä¸ä¾èµ–

### 6.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

```mermaid
mindmap
  root((Task Orchestration<br/>Service))
    Web Framework
      Axum 0.7
        å¼‚æ­¥ Web æœåŠ¡å™¨
      Tokio 1.35
        å¼‚æ­¥è¿è¡Œæ—¶
      Tower
        ä¸­é—´ä»¶ç”Ÿæ€
    gRPC
      Tonic 0.11
        gRPC æ¡†æ¶
      Prost 0.12
        Protocol Buffers
    æ•°æ®å¤„ç†
      Serde 1.0
        åºåˆ—åŒ–/ååºåˆ—åŒ–
      Serde JSON
        JSON å¤„ç†
      TOML 0.8
        é…ç½®è§£æ
    å¹¶å‘æ§åˆ¶
      DashMap 5.5
        å¹¶å‘ HashMap
      Parking Lot 0.12
        é«˜æ€§èƒ½é”
      Tokio Semaphore
        å¹¶å‘é™åˆ¶
    å¯è§‚æµ‹æ€§
      Tracing 0.1
        ç»“æ„åŒ–æ—¥å¿—
      Tracing Subscriber
        æ—¥å¿—è¿‡æ»¤
    å¤–éƒ¨é›†æˆ
      Reqwest 0.11
        HTTP å®¢æˆ·ç«¯
      RdKafka 0.36
        Kafka æ”¯æŒ
```

### 6.2 å…³é”®ä¾èµ–

| ç±»åˆ« | ä¾èµ– | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **Web æ¡†æ¶** | axum | 0.7 | HTTP æœåŠ¡å™¨ |
| | tokio | 1.35 | å¼‚æ­¥è¿è¡Œæ—¶ |
| | tower-http | 0.5 | HTTP ä¸­é—´ä»¶ï¼ˆCORS, é™æµç­‰ï¼‰ |
| **gRPC** | tonic | 0.11 | gRPC æ¡†æ¶ |
| | prost | 0.12 | Protocol Buffers |
| **åºåˆ—åŒ–** | serde | 1.0 | åºåˆ—åŒ–æ¡†æ¶ |
| | serde_json | 1.0 | JSON æ”¯æŒ |
| | toml | 0.8 | TOML é…ç½® |
| **å¹¶å‘** | dashmap | 5.5 | å¹¶å‘ HashMap |
| | parking_lot | 0.12 | åŒæ­¥åŸè¯­ |
| **æ—¥å¿—** | tracing | 0.1 | ç»“æ„åŒ–æ—¥å¿— |
| | tracing-subscriber | 0.3 | æ—¥å¿—è®¢é˜… |
| **HTTP å®¢æˆ·ç«¯** | reqwest | 0.11 | HTTP è¯·æ±‚ |
| **äº‹ä»¶æµ** | rdkafka | 0.36 | Kafka é›†æˆï¼ˆå¯é€‰ï¼‰ |
| **å·¥å…·** | uuid | 1.6 | UUID ç”Ÿæˆ |
| | chrono | 0.4 | æ—¶é—´å¤„ç† |
| | regex | 1.10 | æ­£åˆ™è¡¨è¾¾å¼ |

### 6.3 é¡¹ç›®ç»Ÿè®¡

```
æ€»æºæ–‡ä»¶æ•°: 90+ Rust æ–‡ä»¶
æ ¸å¿ƒæ¨¡å—ä»£ç : 388KB (core/)
LLM é›†æˆä»£ç : 353KB (llm/, 21 ä¸ªæ¨¡å—)
æ€»ä»£ç è¡Œæ•°: çº¦ 15,000+ è¡Œ
```

---

## 7. é…ç½®ç®¡ç†

### 7.1 é…ç½®æ–‡ä»¶ç»“æ„

```mermaid
graph TD
    subgraph "é…ç½®ä¼˜å…ˆçº§ (é«˜åˆ°ä½)"
        Env[ç¯å¢ƒå˜é‡<br/>APP_*]
        EnvFile[config.$APP_ENV.toml<br/>dev/prod/local]
        BaseFile[config.toml<br/>åŸºç¡€é…ç½®]
        Default[ä»£ç é»˜è®¤å€¼]
    end

    Env --> EnvFile
    EnvFile --> BaseFile
    BaseFile --> Default

    style Env fill:#ff6b6b,color:#fff
    style EnvFile fill:#4ecdc4
    style BaseFile fill:#45b7d1
    style Default fill:#95afc0
```

### 7.2 ä¸»è¦é…ç½®é¡¹

#### 7.2.1 æœåŠ¡å™¨é…ç½®

```toml
[server]
host = "0.0.0.0"
port = 8084
request_timeout_secs = 300
max_connections = 1000
```

#### 7.2.2 LLM é…ç½®

```toml
[llm]
service_name = "llm-service"              # Consul æœåŠ¡å
endpoint = "http://localhost:9000"        # å¤‡ç”¨ç«¯ç‚¹
protocol = "grpc"                         # http æˆ– grpc
enable_streaming = true                   # æµå¼å“åº”
default_model = "Qwen3-Max"
temperature = 0.7
top_p = 0.9
timeout_secs = 120
max_retries = 3
max_streaming_indicators = 5              # æµå¼è¿›åº¦å›¾æ ‡å¾ªç¯æ•°
```

#### 7.2.3 å·¥å…·æœåŠ¡é…ç½®

```toml
[tool_service]
service_name = "tool-service"
endpoint = "http://localhost:50052"
protocol = "grpc"
timeout_secs = 60
enable_caching = true
cache_ttl_secs = 300
```

#### 7.2.4 ç¼–æ’å™¨é…ç½®

```toml
[orchestrator]
# å¹¶è¡Œæ‰§è¡Œé…ç½®
enable_parallel_execution = true
parallel_max_concurrent = 8
parallel_min_steps = 2

# è¯„ä¼°é…ç½®
evaluation_score_threshold = 70.0

# è§„åˆ’é…ç½®
enable_two_stage_planning = true
two_stage_tool_threshold = 20
tool_selection_threshold = 60.0           # å·¥å…·ç­›é€‰ç›¸ä¼¼åº¦é˜ˆå€¼

# å·¥ä½œæµé…ç½®
enable_builtin_workflows = true

# æ‰§è¡Œé…ç½®
step_execution_timeout_secs = 60
```

#### 7.2.5 åæ€é…ç½®

```toml
[reflection]
enable_single_step_reflection = true      # å¯ç”¨å•æ­¥åæ€
single_step_confidence_threshold = 70.0   # å¯ä¿¡åº¦é˜ˆå€¼
max_retry_attempts = 3                    # æœ€å¤§é‡è¯•æ¬¡æ•°
```

#### 7.2.6 å“åº”é…ç½®

```toml
[response]
mode = "user"                             # user: ç”¨æˆ·å‹å¥½, agent: ä»£ç†è¯¦ç»†
enable_markdown_formatting = true         # Markdown æ ¼å¼åŒ–
include_execution_details = false         # æ˜¯å¦åŒ…å«æ‰§è¡Œç»†èŠ‚
```

#### 7.2.7 Consul é…ç½®

```toml
[consul]
enabled = true
address = "http://consul:8500"
service_name = "task-orchestrator"
health_check_interval_secs = 10
deregister_after_secs = 30
```

#### 7.2.8 Kafka é…ç½®

```toml
[kafka_service]
enabled = true
brokers = ["kafka:9092"]
audit_topic = "task-orchestration-audit"
log_topic = "task-orchestration-logs"
producer_timeout_ms = 5000
compression = "gzip"
```

#### 7.2.9 è°ƒè¯•é…ç½®

```toml
[debug]
enable_parameter_inference = false        # åŠ¨æ€å‚æ•°æ¨æ–­
log_llm_requests = false                  # è®°å½• LLM è¯·æ±‚
log_tool_calls = true                     # è®°å½•å·¥å…·è°ƒç”¨
save_execution_history = true             # ä¿å­˜æ‰§è¡Œå†å²
execution_history_path = "./execution_logs"
```

### 7.3 ç¯å¢ƒå˜é‡è¦†ç›–

æ‰€æœ‰é…ç½®é¡¹éƒ½å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼š

```bash
# æ ¼å¼: APP_<SECTION>_<KEY>
export APP_SERVER_PORT=9090
export APP_LLM_ENDPOINT=http://new-llm:9000
export APP_ORCHESTRATOR_PARALLEL_MAX_CONCURRENT=16
export APP_DEBUG_ENABLE_PARAMETER_INFERENCE=true
```

---

## 8. éƒ¨ç½²æ¶æ„

### 8.1 å¾®æœåŠ¡æ¶æ„

```mermaid
graph TB
    subgraph "å®¢æˆ·ç«¯"
        WebUI[Web ç•Œé¢]
        Mobile[ç§»åŠ¨åº”ç”¨]
        API_Client[API å®¢æˆ·ç«¯]
    end

    subgraph "è´Ÿè½½å‡è¡¡"
        LB[Nginx / HAProxy]
    end

    subgraph "Task Orchestration Service Cluster"
        TOS1[Orchestrator<br/>å®ä¾‹ 1]
        TOS2[Orchestrator<br/>å®ä¾‹ 2]
        TOS3[Orchestrator<br/>å®ä¾‹ N]
    end

    subgraph "æœåŠ¡å‘ç°ä¸é…ç½®"
        Consul[Consul<br/>Service Discovery]
    end

    subgraph "æ ¸å¿ƒæœåŠ¡"
        LLM_Cluster[LLM Service<br/>Cluster]
        Tool_Cluster[Tool Service<br/>Cluster]
        DB_Service[Database Service]
    end

    subgraph "æ•°æ®å±‚"
        PostgreSQL[(PostgreSQL)]
        Redis[(Redis Cache)]
    end

    subgraph "æ¶ˆæ¯é˜Ÿåˆ—"
        Kafka[Kafka<br/>Event Streaming]
        ZK[ZooKeeper]
    end

    subgraph "ç›‘æ§ä¸æ—¥å¿—"
        Prometheus[Prometheus]
        Grafana[Grafana]
        ELK[ELK Stack]
    end

    WebUI --> LB
    Mobile --> LB
    API_Client --> LB

    LB --> TOS1
    LB --> TOS2
    LB --> TOS3

    TOS1 --> Consul
    TOS2 --> Consul
    TOS3 --> Consul

    Consul --> LLM_Cluster
    Consul --> Tool_Cluster
    Consul --> DB_Service

    TOS1 --> LLM_Cluster
    TOS1 --> Tool_Cluster
    TOS1 --> DB_Service
    TOS1 --> Kafka

    DB_Service --> PostgreSQL
    DB_Service --> Redis

    Kafka --> ZK

    TOS1 --> Prometheus
    Kafka --> ELK
    Prometheus --> Grafana

    style TOS1 fill:#ff6b6b,color:#fff
    style TOS2 fill:#ff6b6b,color:#fff
    style TOS3 fill:#ff6b6b,color:#fff
    style Consul fill:#4ecdc4
    style Kafka fill:#45b7d1
```

### 8.2 Docker Compose éƒ¨ç½²ç¤ºä¾‹

```yaml
version: '3.8'

services:
  # Task Orchestrator Service
  task-orchestrator:
    image: task-orchestrator:0.1.0
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8084:8084"
    environment:
      - APP_ENV=prod
      - APP_SERVER_HOST=0.0.0.0
      - APP_SERVER_PORT=8084
      - APP_CONSUL_ADDRESS=http://consul:8500
      - APP_KAFKA_SERVICE_BROKERS=kafka:9092
    depends_on:
      - consul
      - kafka
    restart: unless-stopped
    networks:
      - orchestrator-net
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8084/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Consul Service Discovery
  consul:
    image: consul:1.15
    ports:
      - "8500:8500"
    command: agent -server -bootstrap -ui -client=0.0.0.0
    networks:
      - orchestrator-net

  # Kafka Event Streaming
  zookeeper:
    image: confluentinc/cp-zookeeper:7.5.0
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
    networks:
      - orchestrator-net

  kafka:
    image: confluentinc/cp-kafka:7.5.0
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
    environment:
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
    networks:
      - orchestrator-net

  # PostgreSQL Database
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: orchestrator
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: password
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - orchestrator-net

  # Redis Cache
  redis:
    image: redis:7
    ports:
      - "6379:6379"
    networks:
      - orchestrator-net

networks:
  orchestrator-net:
    driver: bridge

volumes:
  postgres-data:
```

### 8.3 Kubernetes éƒ¨ç½²æ¶æ„

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: task-orchestrator
  labels:
    app: task-orchestrator
spec:
  replicas: 3
  selector:
    matchLabels:
      app: task-orchestrator
  template:
    metadata:
      labels:
        app: task-orchestrator
    spec:
      containers:
      - name: orchestrator
        image: task-orchestrator:0.1.0
        ports:
        - containerPort: 8084
        env:
        - name: APP_ENV
          value: "prod"
        - name: APP_CONSUL_ADDRESS
          value: "http://consul:8500"
        - name: APP_KAFKA_SERVICE_BROKERS
          value: "kafka-service:9092"
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8084
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health
            port: 8084
          initialDelaySeconds: 10
          periodSeconds: 5
---
apiVersion: v1
kind: Service
metadata:
  name: task-orchestrator-service
spec:
  selector:
    app: task-orchestrator
  ports:
  - protocol: TCP
    port: 8084
    targetPort: 8084
  type: LoadBalancer
```

### 8.4 ç›‘æ§æŒ‡æ ‡

```mermaid
graph LR
    subgraph "åº”ç”¨æŒ‡æ ‡"
        M1[ä»»åŠ¡åˆ›å»ºé€Ÿç‡]
        M2[ä»»åŠ¡å®Œæˆé€Ÿç‡]
        M3[ä»»åŠ¡æˆåŠŸç‡]
        M4[å¹³å‡æ‰§è¡Œæ—¶é—´]
        M5[åæ€å¾ªç¯æ¬¡æ•°]
    end

    subgraph "æœåŠ¡æŒ‡æ ‡"
        M6[LLM è°ƒç”¨å»¶è¿Ÿ]
        M7[Tool è°ƒç”¨å»¶è¿Ÿ]
        M8[å¹¶å‘æ­¥éª¤æ•°]
        M9[å‚æ•°æ¨æ–­æ¬¡æ•°]
    end

    subgraph "ç³»ç»ŸæŒ‡æ ‡"
        M10[CPU ä½¿ç”¨ç‡]
        M11[å†…å­˜ä½¿ç”¨ç‡]
        M12[ç½‘ç»œ I/O]
        M13[Kafka æ¶ˆæ¯é€Ÿç‡]
    end

    M1 --> Prometheus
    M2 --> Prometheus
    M3 --> Prometheus
    M4 --> Prometheus
    M5 --> Prometheus
    M6 --> Prometheus
    M7 --> Prometheus
    M8 --> Prometheus
    M9 --> Prometheus
    M10 --> Prometheus
    M11 --> Prometheus
    M12 --> Prometheus
    M13 --> Prometheus

    Prometheus --> Grafana[Grafana Dashboard]

    style Grafana fill:#f7b731
```

---

## é™„å½•

### A. ç›®å½•ç»“æ„æ ‘

```
task-orchestration-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs                          # HTTP æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ main_grpc.rs                     # gRPC æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ lib.rs                           # åº“æ ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                             # API å±‚
â”‚   â”‚   â”œâ”€â”€ handlers.rs                  # è¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ models.rs                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ health.rs                    # å¥åº·æ£€æŸ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                            # æ ¸å¿ƒç¼–æ’å±‚
â”‚   â”‚   â”œâ”€â”€ orchestrator.rs              # ä¸»ç¼–æ’å™¨ (165KB)
â”‚   â”‚   â”œâ”€â”€ planner.rs                   # è§„åˆ’å™¨ (100KB)
â”‚   â”‚   â”œâ”€â”€ executor.rs                  # æ‰§è¡Œå™¨ (107KB)
â”‚   â”‚   â”œâ”€â”€ parallel_executor.rs         # å¹¶è¡Œæ‰§è¡Œå™¨ (31KB)
â”‚   â”‚   â”œâ”€â”€ evaluator.rs                 # è¯„ä¼°å™¨ (20KB)
â”‚   â”‚   â”œâ”€â”€ reflector.rs                 # åæ€å™¨ (42KB)
â”‚   â”‚   â”œâ”€â”€ post_task_evaluator.rs       # ä»»åŠ¡åè¯„ä¼°å™¨ (22KB)
â”‚   â”‚   â”œâ”€â”€ parameter_resolver.rs        # å‚æ•°è§£æå™¨ (61KB)
â”‚   â”‚   â”œâ”€â”€ execution_context.rs         # æ‰§è¡Œä¸Šä¸‹æ–‡ (22KB)
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                             # LLM é›†æˆå±‚ (21ä¸ªæ¨¡å—)
â”‚   â”‚   â”œâ”€â”€ unified_client.rs            # ç»Ÿä¸€å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ client.rs                    # HTTP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ grpc_client.rs               # gRPC å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ planning_prompts.rs          # è§„åˆ’æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ selection_prompts.rs         # å·¥å…·é€‰æ‹©æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ replanning_prompts.rs        # é‡è§„åˆ’æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ continue_planning_prompts.rs # ç»§ç»­è§„åˆ’æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ reflection_prompts.rs        # åæ€æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ single_step_repair_prompts.rs # å•æ­¥ä¿®å¤æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ evaluation_prompts.rs        # è¯„ä¼°æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ post_task_evaluation_prompts.rs # ä»»åŠ¡åè¯„ä¼°æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ parameter_inference_prompts.rs  # å‚æ•°æ¨æ–­æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ scene_guidance.rs            # åœºæ™¯å¼•å¯¼
â”‚   â”‚   â”œâ”€â”€ message_templates.rs         # æ¶ˆæ¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ ai_reporter_prompts.rs       # AI æŠ¥å‘Šæç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ message_formatter_prompts.rs # æ¶ˆæ¯æ ¼å¼åŒ–æç¤ºè¯
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ tool/                            # å·¥å…·æœåŠ¡å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ unified_client.rs
â”‚   â”‚   â”œâ”€â”€ client.rs
â”‚   â”‚   â”œâ”€â”€ grpc_client.rs
â”‚   â”‚   â””â”€â”€ client_with_discovery.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ state/                           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ task_state.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                          # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ consul/                          # Consul é›†æˆ
â”‚   â”‚   â”œâ”€â”€ discovery.rs
â”‚   â”‚   â””â”€â”€ registry.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                        # æ•°æ®åº“å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ client.rs
â”‚   â”‚   â””â”€â”€ service.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ kafka/                           # Kafka é›†æˆ
â”‚   â”‚   â”œâ”€â”€ producer.rs
â”‚   â”‚   â”œâ”€â”€ consumer.rs
â”‚   â”‚   â”œâ”€â”€ audit.rs
â”‚   â”‚   â””â”€â”€ grpc_client.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ grpc/                            # gRPC æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ server.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ logging/                         # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ kafka_logger.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ workflow/                        # å·¥ä½œæµç®¡ç†
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ errors.rs
â”‚   â”‚   â”œâ”€â”€ string_utils.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ message_formatter.rs             # æ¶ˆæ¯æ ¼å¼åŒ–å™¨
â”‚   â””â”€â”€ ai_reporter.rs                   # AI æŠ¥å‘Šç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ proto/                               # Protocol Buffers
â”‚   â”œâ”€â”€ task_orchestrator.proto
â”‚   â”œâ”€â”€ llm.proto
â”‚   â”œâ”€â”€ tool_service.proto
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ config.dev.toml                      # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ config.prod.toml                     # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ Cargo.toml                           # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ build.rs                             # æ„å»ºè„šæœ¬
â””â”€â”€ README.md
```

### B. API ç«¯ç‚¹æ¸…å•

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | è¯·æ±‚ä½“ | å“åº” |
|------|------|------|--------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ | - | `{"status": "healthy"}` |
| `/api/v1/tasks` | POST | åˆ›å»ºä»»åŠ¡ | `CreateTaskRequest` | `CreateTaskResponse` |
| `/api/v1/tasks/:id` | GET | è·å–ä»»åŠ¡çŠ¶æ€ | - | `TaskStatusResponse` |
| `/api/v1/tasks/:id/result` | GET | è·å–ä»»åŠ¡ç»“æœ | - | `TaskResultResponse` |
| `/api/v1/tasks` | GET | åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡ | - | `TaskListResponse` |

### C. å…³é”®æŒ‡æ ‡ä¸æ€§èƒ½

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| API å“åº”æ—¶é—´ | < 100ms | ä»»åŠ¡åˆ›å»ºæ¥å£ |
| è§„åˆ’æ—¶é—´ | < 5s | å•æ¬¡è§„åˆ’ç”Ÿæˆ |
| å¹¶å‘ä»»åŠ¡æ•° | > 1000 | åŒæ—¶å¤„ç†çš„ä»»åŠ¡ |
| æ­¥éª¤æ‰§è¡Œå¹¶å‘ | 8 | é»˜è®¤å¹¶è¡Œæ­¥éª¤æ•° |
| åæ€å¾ªç¯æ¬¡æ•° | æ— é™åˆ¶ | ç”± LLM è‡ªä¸»å†³å®š |
| å¯ç”¨æ€§ | 99.9% | æœåŠ¡å¯ç”¨æ€§ç›®æ ‡ |

---

## æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† Task Orchestration Service çš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒæ¨¡å—ã€å·¥ä½œæµç¨‹å’Œéƒ¨ç½²æ–¹æ¡ˆã€‚ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

1. **åæ€è§„åˆ’èŒƒå¼**: åŠ¨æ€è¿­ä»£çš„ä»»åŠ¡æ‰§è¡Œå¾ªç¯ï¼Œè‡ªé€‚åº”ä¼˜åŒ–
2. **æ¨¡å—åŒ–è®¾è®¡**: 9å¤§æ ¸å¿ƒæ¨¡å—ï¼ŒèŒè´£æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•
3. **æ™ºèƒ½è§„åˆ’**: ä¸¤é˜¶æ®µè§„åˆ’ + å†…ç½®å·¥ä½œæµ + è¯­ä¹‰è·¯ç”±
4. **å¹¶è¡Œæ‰§è¡Œ**: DAG ä¾èµ–åˆ†æå’Œæ™ºèƒ½å¹¶è¡Œè°ƒåº¦
5. **è‡ªæ„ˆèƒ½åŠ›**: å•æ­¥åæ€ + å…¨å±€åæ€ï¼Œè‡ªåŠ¨æ¢å¤
6. **ä¼ä¸šé›†æˆ**: Consul + Kafka + åˆ†å¸ƒå¼è¿½è¸ª

è¯¥æœåŠ¡é€‚ç”¨äºå·¥ä¸šè‡ªåŠ¨åŒ–ã€æ•°æ®å¤„ç†ã€æ™ºèƒ½åŠ©æ‰‹ç­‰å¤šç§åœºæ™¯ã€‚

---

**æ–‡æ¡£ç»´æŠ¤**: Task Orchestration Team
**æœ€åæ›´æ–°**: 2026-01-13
**ç‰ˆæœ¬**: 1.0
